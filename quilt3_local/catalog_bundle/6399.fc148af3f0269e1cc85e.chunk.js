"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[6399],{21587:(e,n,t)=>{t.d(n,{XZ:()=>d,Xq:()=>k,gN:()=>m});var a=t(70655),i=t(67294),l=t(39803),r=t(41120),o=t(30553),c=t(13258),u=t(22318);function m(e){var n=e.input,t=e.meta,r=e.errors,o=e.helperText,c=e.InputLabelProps,u=(0,a._T)(e,["input","meta","errors","helperText","InputLabelProps"]),m=t.submitFailed&&(t.error||t.submitError),s=(0,a.pi)((0,a.pi)({error:!!m,helperText:m?r[m]||m:o,disabled:t.submitting||t.submitSucceeded,InputLabelProps:(0,a.pi)({shrink:!0},c)},n),u);return i.createElement(l.Z,(0,a.pi)({},s))}var s=r.Z({root:{marginBottom:-9,marginTop:-9}});function d(e){var n=e.input,t=void 0===n?{}:n,l=e.meta,r=(e.errors,e.label),u=void 0===r?void 0:r,m=e.FormControlLabelProps,d=void 0===m?{}:m,p=(0,a._T)(e,["input","meta","errors","label","FormControlLabelProps"]),k=s();return i.createElement(o.Z,(0,a.pi)({},d,{control:i.createElement(c.Z,(0,a.pi)({classes:k,disabled:l.submitting||l.submitSucceeded},t,p)),label:u}))}var p=r.Z((function(e){return{root:{marginTop:e.spacing(3),"& a":{textDecoration:"underline"}}}}));function k(e){var n=e.error,t=e.errors,l=(0,a._T)(e,["error","errors"]),r=p();return n?i.createElement(u.Z,(0,a.pi)({color:"error",classes:r},l),t[n]||n):null}},56858:(e,n,t)=>{t.d(n,{F$:()=>m,uU:()=>a});var a={};t.r(a),t.d(a,{F$:()=>i,wT:()=>l,Gl:()=>r});var i,l,r,o=t(32521),c=t(23915),u=t(14194);!function(e){e.READ="READ",e.READ_WRITE="READ_WRITE"}(i||(i={})),function(e){e.NAME="NAME",e.MODIFIED="MODIFIED"}(l||(l={})),function(e){e.NEW_FIRST="NEW_FIRST",e.OLD_FIRST="OLD_FIRST"}(r||(r={}));var m=u.Km(i,"BucketPermissionLevel");new o.Type("BucketPermissionLevelFromString",m.is,(function(e,n){return"Read"===e?o.success(i.READ):"ReadWrite"===e?o.success(i.READ_WRITE):o.failure(e,n)}),(function(e){return e===i.READ?"Read":e===i.READ_WRITE?"ReadWrite":(0,c.Z)(e)}))},57156:(e,n,t)=>{t.d(n,{Z:()=>o});var a=t(70655),i=t(67294),l=t(64593);function r(e,n){return function(e,n){return n?Array.isArray(n)?(0,a.ev)((0,a.ev)([],n,!0),[e],!1):[n,e]:[e]}(e,n).join(" â€¢ ")}function o(e){var n=e.children,t=e.base,a=void 0===t?"Quilt is a versioned data hub for AWS":t;return i.createElement(l.q,null,i.createElement("title",null,r(a,n)))}},98763:(e,n,t)=>{t.d(n,{CN:()=>c,Ig:()=>o});var a=t(67294),i=36e5,l=24*i,r=new Intl.RelativeTimeFormat("en",{numeric:"auto"});function o(e){var n=e.value,t=a.useState(new Date),o=t[0],c=t[1];return a.useEffect((function(){var e=window.setInterval((function(){return c(new Date)}),1e3);return function(){return clearInterval(e)}}),[n]),a.useMemo((function(){return a.createElement(a.Fragment,null,function(e,n){var t=e.valueOf()-((null==n?void 0:n.valueOf())||Date.now()),a=t/31536e6;if(Math.abs(a)>=1)return r.format(Math.round(a),"year");var o=t/2592e6;if(Math.abs(o)>=1)return r.format(Math.round(o),"month");var c=t/l;if(Math.abs(c)>=1)return r.format(Math.round(c),"day");var u=t/i;if(Math.abs(u)>=1)return r.format(Math.round(u),"hour");var m=t/6e4;return Math.abs(m)>=1?r.format(Math.round(m),"minute"):r.format(Math.round(t/1e3),"second")}(n,o))}),[n,o])}function c(e){var n=e.value,t=e.zero,i=e.one,l=e.other;return a.useMemo((function(){return a.createElement(a.Fragment,null,function(e,n){var t=n[function(e){switch(e){case 0:return"zero";case 1:return"one";default:return"other"}}(e)];return t?"function"==typeof t?t(e):t:"function"==typeof n.other?n.other(e):n.other}(n,{zero:t,one:i,other:l}))}),[n,t,i,l])}},14194:(e,n,t)=>{t.d(n,{AG:()=>p,CM:()=>m.CM,Dw:()=>m.Dw,Jx:()=>d,Km:()=>v,Xh:()=>m.Xh,ij:()=>m.ij,jV:()=>m.jV});var a,i=t(70655),l=t(80070),r=t(32521),o=t(84144),c=t(19344),u=t(36155),m=t(96882),s=function(e){function n(n){var t=(0,o.formatValidationErrors)(n).join("\n");return e.call(this,"ValidationError\n".concat(t))||this}return(0,i.ZT)(n,e),n}(u.G),d=function(e){return c.Z(e.decode,l.g_((function(e){throw new s(e)}),(function(e){return e})))},p=function(e,n){return void 0===n&&(n="Nullable<".concat(e.name,">")),new r.Type(n,(function(n){return null===n||e.is(n)}),(function(n,t){return null==n?r.success(null):e.validate(n,t)}),(function(e){return e}))};a||(a={});var k=function(e){function n(n,t){var a=e.call(this,t,(function(e){return!!a.enumValues.has(e)&&"number"!=typeof a.enum[e]}),(function(e,n){return a.is(e)?r.success(e):r.failure(e,n)}),r.identity)||this;return a._tag="EnumType",a.enum=n,a.enumValues=new Set(Object.values(n)),a}return(0,i.ZT)(n,e),n}(r.Type),v=function(e,n){return void 0===n&&(n="enum"),new k(e,n)}},22966:(e,n,t)=>{t.d(n,{ZX:()=>s,D$:()=>N});var a=t(70655),i=t(67294),l=t(41120),r=t(17812),o=t(92863),c=t(10529),u=l.Z((function(e){return{root:{padding:e.spacing(.5)}}}));function m(e){var n=e.direction,t=(0,a._T)(e,["direction"]),l=u();return i.createElement(r.Z,(0,a.pi)({className:l.root},t),i.createElement(o.Z,null,"chevron_".concat(n)))}function s(e){var n=e.page,t=e.pages,a=e.nextPage,l=e.prevPage;return t<=1?null:i.createElement(c.Z,{display:"flex",alignItems:"center"},i.createElement(m,{direction:"left",onClick:l,disabled:n<=1}),i.createElement(m,{direction:"right",onClick:a,disabled:n>=t}),i.createElement(c.Z,{ml:1.5},n," of ",t))}var d=t(97716),p=t(10180),k=t(20115),v=t(13646),f=t(19344),g=t(43363),E=t(68981),y=t(19324),h=t(34314),b=function(e,n){return i.useMemo((function(){return null==e?e:n(e)}),[e,n])};var N=function(e,n){var t=void 0===n?{}:n,a=t.getItemId,l=void 0===a?d.Z:a,r=t.perPage,o=void 0===r?10:r,c=t.onChange,u=i.useState(1),m=u[0],s=u[1],N=i.useState(o),S=N[0],Z=N[1],C=Math.max(1,Math.ceil(e.length/S)),F=i.useMemo((function(){return f.Z(g.Z(1,C),s)}),[C,s]),D=i.useCallback((function(){return F(m+1)}),[F,m]),R=i.useCallback((function(){return F(m-1)}),[F,m]);(function(e,n){void 0===n&&(n=d.Z);var t=b(e,n),a=(0,h.Z)(e),i=b(a,n);return p.Z(Array,t)&&p.Z(Array,i)?!k.Z(i,t):!v.Z(t,i)})(e,b(l,E.Z))&&1!==m&&F(1);var _=(m-1)*S,A=i.useMemo((function(){return y.Z(_,_+S)}),[_,S]),w=b(e,A);return(0,h.Z)(S,(function(e){e&&S!==e&&F(Math.floor((m-1)*e/S)+1)})),(0,h.Z)(m,(function(e){m!==e&&c&&c(e,m)})),{paginated:w,total:e.length,from:_+1,to:_+S,perPage:S,setPerPage:Z,page:m,pages:C,nextPage:D,prevPage:R,goToPage:F}}},77246:(e,n,t)=>{t.d(n,{Ex:()=>M,Fb:()=>A,Pl:()=>F,im:()=>T,o8:()=>_,tl:()=>U,xS:()=>P});var a=t(70655),i=t(94184),l=t.n(i),r=t(19344),o=t(57438),c=t(97716),u=t(51826),m=t(67294),s=t(868),d=t(17812),p=t(41120),k=t(28358),v=t(22318),f=t(83750),g=t(57394),E=t(88222),y=t(13258),h=t(77256),b=t(95477),N=t(61657),S=t(59114),Z=t(9001),C=function(e){return"asc"===e?"desc":"asc"};function F(e){var n=e.rows,t=(0,a._T)(e,["rows"]),i=m.useState(t.column),l=i[0],s=i[1],d=m.useState(t.direction||"asc"),p=d[0],k=d[1],v=l.sortBy||l.getValue,f=m.useMemo((function(){return r.Z(o.Z(v),"asc"===p?c.Z:u.Z)}),[v,p]),g=(0,Z.Z)([f,n],(function(){return f(n)})),E=m.useCallback((function(e){l!==e?(s(e),k("asc")):k(C)}),[l,s,k]);return{column:l,direction:p,change:E,ordered:g}}var D=function(e){return e?m.createElement(s.ZP,{title:e.title,key:e.title},m.createElement(d.Z,{"aria-label":e.title,onClick:e.fn,href:e.href,component:e.href?"a":void 0,target:e.href?"_blank":void 0},e.icon)):null},R=p.Z((function(e){return{root:{paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:(0,S.$n)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}}));function _(e){var n,t=e.heading,a=e.selected,i=void 0===a?0:a,r=e.actions,o=void 0===r?[]:r,c=e.selectedActions,u=void 0===c?[]:c,s=R();return m.createElement(k.Z,{className:l()(s.root,(n={},n[s.highlight]=i>0,n))},m.createElement("div",{className:s.title},i>0?m.createElement(v.Z,{color:"inherit",variant:"subtitle1"},i," selected"):m.createElement(v.Z,{variant:"h6"},t)),m.createElement("div",{className:s.spacer}),m.createElement("div",{className:s.actions},(i>0?u:o).map(D)))}function A(e){var n=e.columns,t=e.selection,a=void 0===t?void 0:t,i=e.ordering,l=e.withInlineActions,r=void 0!==l&&l;return m.createElement(f.Z,null,m.createElement(g.Z,null,!!a&&m.createElement(E.Z,{padding:"checkbox",onClick:a.toggleAll},m.createElement(y.Z,{indeterminate:a.selected.size>0&&a.selected.size<a.all.size,checked:a.selected.equals(a.all)})),n.map((function(e){return m.createElement(E.Z,{key:e.id,sortDirection:i.column===e&&i.direction,align:e.align},!1===e.sortable?e.label:m.createElement(s.ZP,{title:e.hint||"Sort",placement:"bottom-start",enterDelay:300},m.createElement(h.Z,{active:i.column===e,direction:i.direction,onClick:function(){return i.change(e)}},e.label)))})),r&&m.createElement(E.Z,{align:"right"},"Actions")))}var w=p.Z({root:{overflowX:"auto"}});function T(e){var n=e.className,t=void 0===n?void 0:n,i=(0,a._T)(e,["className"]),r=w();return m.createElement("div",(0,a.pi)({className:l()(r.root,t)},i))}var I=p.Z((function(e){return{root:{opacity:.3,paddingRight:e.spacing(1),textAlign:"right",transition:"opacity 100ms",whiteSpace:"nowrap","tr:hover &":{opacity:1}}}}));function P(e){var n=e.actions,t=void 0===n?[]:n,i=e.children,l=void 0===i?void 0:i,r=(0,a._T)(e,["actions","children"]),o=I();return m.createElement("div",(0,a.pi)({className:o.root},r),t.map(D),l)}var x=p.Z((function(e){return{root:{marginBottom:e.spacing(2),marginLeft:e.spacing(3)}}}));function M(e){var n=x();return m.createElement(b.Z,(0,a.pi)({classes:n},e))}var V=p.Z((function(e){return{toolbar:{paddingRight:[e.spacing(1),"!important"]}}}));function U(e){var n=e.pagination,t=(0,a._T)(e,["pagination"]),i=V();return m.createElement(N.Z,(0,a.pi)({classes:i,component:"div",count:n.total,rowsPerPage:n.perPage,page:n.page-1,onChangePage:function(e,t){return n.goToPage(t+1)},onChangeRowsPerPage:function(e){return n.setPerPage(e.target.value)}},t))}},36399:(e,n,t)=>{t.r(n),t.d(n,{default:()=>On});var a=t(67294),i=t(10529),l=t(46974),r=t(57156),o=t(28238),c=t(70655),u=t(95142),m=t(32521),s=t(30601),d=t(70475),p=t(19344),k=t(62825),v=t(43880),f=t(97716),g=t(66688),E=t(92432),y=t(868),h=t(41120),b=t(66083),N=t(22318),S=t(29525),Z=t(30553),C=t(13258),F=t(66037),D=t(66856),R=t(282),_=t(95477),A=t(39803),w=t(17812),T=t(92863),I=t(38396),P=t(85639),x=t(79895),M=t(82302),V=t(99613),U=t(57394),O=t(88222),W=t(67456),q=t(94998),J=t(23915),$=t(14194),L=t(31708);function z(e){var n=e.input,t=e.meta,i=e.errors,l=e.helperText,r=(0,c._T)(e,["input","meta","errors","helperText"]),o=t.submitFailed&&(t.error||!t.dirtySinceLastSubmit&&t.submitError),u=(0,c.pi)((0,c.pi)({error:!!o,helperText:o?i[o]||o:l,disabled:t.submitting||t.submitSucceeded},n),r);return a.createElement(A.Z,(0,c.pi)({},u))}var B=h.Z((function(e){return{root:{marginTop:e.spacing(3),"& a":{textDecoration:"underline"}}}}));function G(e){var n=e.error,t=e.errors,i=(0,c._T)(e,["error","errors"]),l=B();return n?a.createElement(N.Z,(0,c.pi)({color:"error",classes:l},i),t[n]||n):null}var j=t(77246),Q=t(52663),X=t(62822),Y=t(50998),H=t(95757),K=t(30585),ee=t(81860),ne=t(70397),te=t(62799),ae="https://console.aws.amazon.com/iam/home",ie=/^arn:aws:iam:[^:]*:[^:]+:role\/(?:.*\/)?(.+)$/,le=/^arn:aws:iam:[^:]*:[^:]+:policy\/(.+)$/;function re(e){var n=(e.match(ie)||[])[1];return n?"".concat(ae,"#/roles/").concat(n):(e.match(le)||[])[1]?"".concat(ae,"#/policies/").concat(e):void 0}var oe={kind:"Document",definitions:(0,c.ev)([{kind:"FragmentDefinition",name:{kind:"Name",value:"PolicySelection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Policy"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"arn"}},{kind:"Field",name:{kind:"Name",value:"managed"}},{kind:"Field",name:{kind:"Name",value:"permissions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"BucketPermissionSelection"}}]}},{kind:"Field",name:{kind:"Name",value:"roles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"arn"}},{kind:"Field",name:{kind:"Name",value:"permissions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"BucketPermissionSelection"}}]}},{kind:"Field",name:{kind:"Name",value:"policies"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}],[{kind:"FragmentDefinition",name:{kind:"Name",value:"BucketPermissionSelection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BucketPermission"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"bucket"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"iconUrl"}}]}},{kind:"Field",name:{kind:"Name",value:"level"}}]}}],!0)},ce={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_Policies"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"policies"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PolicySelection"}}]}}]}}],oe.definitions,!0)};function ue(e){var n=e.open,t=e.onClose,l=e.policies,r=e.attachPolicy,o=a.useState(null),c=o[0],u=o[1],m=a.useCallback((function(){c&&r(c),u(null)}),[r,c,u]),s=a.useCallback((function(e){u(e),t()}),[u,t]);return a.createElement(Q.Z,{maxWidth:"xs",open:n,onClose:t,onExited:m},a.createElement(b.Z,null,"Attach a policy"),a.createElement(X.Z,{dense:!0},l.length?l.map((function(e){return a.createElement(Y.Z,{button:!0,key:e.id,onClick:function(){return s(e)}},a.createElement(H.Z,null,e.title,a.createElement(i.Z,{component:"span",color:"text.secondary"}," ","(",e.managed?a.createElement(a.Fragment,null,e.permissions.length," buckets"):a.createElement(a.Fragment,null,"unmanaged"),")")))})):a.createElement(S.Z,{dividers:!0},a.createElement(N.Z,null,"No more policies to attach"))),a.createElement(D.Z,null,a.createElement(R.Z,{autoFocus:!0,onClick:t,color:"primary"},"Cancel")))}function me(e){var n=e.className,t=e.input,l=t.value,r=t.onChange,o=e.meta,u=e.onAdvanced,m=o.submitFailed&&(o.error||!o.dirtySinceLastSubmit&&o.submitError),s=(0,te.ZP)({query:ce}),d=a.useState(!1),p=d[0],k=d[1],v=a.useCallback((function(){k(!0)}),[k]),f=a.useCallback((function(){k(!1)}),[k]),g=a.useCallback((function(e){r(l.concat(e))}),[r,l]),E=a.useMemo((function(){return s.case({fetching:function(){return null},error:function(){return null},data:function(e){var n=e.policies,t=l.reduce((function(e,n){var t,a=n.id;return(0,c.pi)((0,c.pi)({},e),((t={})[a]=!0,t))}),{});return n.filter((function(e){return!t[e.id]}))}})}),[s,l]),h=l.length>=5;return a.createElement("div",{className:n},a.createElement(i.Z,{display:"flex",alignItems:"center"},a.createElement(N.Z,{variant:"h6"},"Attached policies"),s.case({data:function(){return null},fetching:function(){return a.createElement(y.ZP,{arrow:!0,title:"Fetching policies"},a.createElement(_.Z,{size:20,style:{opacity:.3,marginLeft:"8px"}}))},error:function(e){return a.createElement(y.ZP,{arrow:!0,title:a.createElement(a.Fragment,null,"Error fetching policies: ",e.message)},a.createElement(T.Z,{style:{opacity:.3,marginLeft:"8px"}},"error"))}})),a.createElement(K.Z,null,"Manage access by combining ",a.createElement("strong",null,"up to ",5)," reusable policies",!!u&&a.createElement(a.Fragment,null," ","or ",a.createElement(ne.Z,{onClick:u},"set existing role via ARN"))),a.createElement(F.Z,{in:!!m},a.createElement(K.Z,{error:!0},m||" ")),a.createElement(X.Z,{dense:!0,disablePadding:!0},l.map((function(e){return a.createElement(Y.Z,{key:e.id,divider:!0,disableGutters:!0},a.createElement(H.Z,null,e.title,a.createElement(i.Z,{component:"span",color:"text.secondary"}," ","(",e.managed?a.createElement(a.Fragment,null,e.permissions.length," buckets"):a.createElement(a.Fragment,null,"unmanaged"),")")),a.createElement(ee.Z,{style:{right:0}},a.createElement(y.ZP,{title:"Detach this policy"},a.createElement(w.Z,{onClick:function(){return function(e){r(l.filter((function(n){return n.id!==e.id})))}(e)},edge:"end",size:"small"},a.createElement(T.Z,{fontSize:"small"},"clear")))))})),!h&&!!(null==E?void 0:E.length)&&a.createElement(Y.Z,{button:!0,disableGutters:!0,onClick:v},a.createElement(H.Z,null,!l.length&&a.createElement(a.Fragment,null,"No policies attached. "),"Attach a policyâ€¦"))),E&&a.createElement(ue,{policies:E,open:p,onClose:f,attachPolicy:g}))}var se=[{kind:"FragmentDefinition",name:{kind:"Name",value:"RoleSelection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Role"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"arn"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ManagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"arn"}},{kind:"Field",name:{kind:"Name",value:"permissions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bucket"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"level"}}]}},{kind:"Field",name:{kind:"Name",value:"policies"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"managed"}},{kind:"Field",name:{kind:"Name",value:"permissions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bucket"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"level"}}]}},{kind:"Field",name:{kind:"Name",value:"roles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]}}],de={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_Roles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RoleSelection"}}]}},{kind:"Field",name:{kind:"Name",value:"defaultRole"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ManagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}],se,!0)},pe={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_RoleCreateManaged"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ManagedRoleInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"roleCreate"},name:{kind:"Name",value:"roleCreateManaged"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RoleCreateSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RoleSelection"}}]}}]}}]}}]}}],se,!0)},ke={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_RoleCreateUnmanaged"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedRoleInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"roleCreate"},name:{kind:"Name",value:"roleCreateUnmanaged"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RoleCreateSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RoleSelection"}}]}}]}}]}}]}}],se,!0)},ve={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_RoleUpdateManaged"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ManagedRoleInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"roleUpdate"},name:{kind:"Name",value:"roleUpdateManaged"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RoleUpdateSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RoleSelection"}}]}}]}}]}}]}}],se,!0)},fe={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_RoleUpdateUnmanaged"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedRoleInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"roleUpdate"},name:{kind:"Name",value:"roleUpdateUnmanaged"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RoleUpdateSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RoleSelection"}}]}}]}}]}}]}}],se,!0)},ge={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_RoleDelete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roleDelete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},Ee={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_RoleSetDefault"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roleSetDefault"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RoleSetDefaultSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ManagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]}}]}}]},ye=[{id:"name",label:"Name",getValue:s.Z("name"),props:{component:"th",scope:"row"},getDisplay:function(e,n,t){var i=t.defaultRoleId;return n.id===i?a.createElement(y.ZP,{title:"Automatically assigned to new users."},a.createElement("strong",null,e,"*")):e}},{id:"source",label:"Source",getValue:function(e){return"ManagedRole"===e.__typename},getDisplay:function(e){return e?a.createElement("abbr",{title:"This IAM role is created and managed by Quilt"},"Quilt"):a.createElement("abbr",{title:"This IAM role is provided and managed by you or another administrator"},"Custom")}},{id:"policies",label:"Associated policies",getValue:function(e){return"ManagedRole"===e.__typename?e.policies.length:null},getDisplay:function(e,n){return"ManagedRole"===n.__typename?a.createElement(y.ZP,{arrow:!0,title:n.policies.length?a.createElement(i.Z,{component:"ul",pl:1,m:.5},n.policies.map((function(e){return a.createElement("li",{key:e.id},e.title)}))):""},a.createElement("span",null,n.policies.length," / ",5)):"N/A"}},{id:"buckets",label:"Buckets",getValue:function(e){return"ManagedRole"===e.__typename?e.permissions.length:null},getDisplay:function(e,n){return"ManagedRole"===n.__typename?a.createElement(y.ZP,{arrow:!0,title:n.permissions.length?a.createElement(i.Z,{component:"ul",pl:1,m:.5},n.permissions.map((function(e){return a.createElement("li",{key:e.bucket.name},e.bucket.name," (",e.level,")")}))):""},a.createElement("span",null,n.permissions.length)):"N/A"}}],he=h.Z((function(e){return{lock:{alignItems:"center",background:"rgba(255,255,255,0.9)",bottom:52,cursor:"not-allowed",display:"flex",flexDirection:"column",justifyContent:"center",left:0,position:"absolute",right:0,top:64,zIndex:3},title:{"&>*":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},panel:{marginTop:e.spacing(2)}}}));function be(e){var n=this,t=e.close,i=he(),l=E.Db(pe)[1],r=E.Db(ke)[1],o=W.D$().push,m=a.useState(!0),s=m[0],p=m[1],k=a.useCallback((function(e){return(0,c.mG)(n,void 0,void 0,(function(){var n,a,i,m,p;return(0,c.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),n=void 0,s?(a=d.Z(Ce)(e),[4,l({input:a})]):[3,2];case 1:return n=c.sent(),[3,4];case 2:return a=d.Z(Ze)(e),[4,r({input:a})];case 3:n=c.sent(),c.label=4;case 4:if(n.error)throw n.error;if(!n.data)throw new Error("No data");switch((i=n.data.roleCreate).__typename){case"RoleCreateSuccess":return o('Role "'.concat(i.role.name,'" created')),t(),[2,void 0];case"RoleNameReserved":return[2,{name:"reserved"}];case"RoleNameExists":return[2,{name:"taken"}];case"RoleNameInvalid":return[2,{name:"invalid"}];case"RoleHasTooManyPoliciesToAttach":return[2,{policies:"Too many policies to attach"}];default:return[2,(0,J.Z)(i)]}return[3,6];case 5:return m=c.sent(),console.error("Error creating role"),console.error(m),[2,(p={},p[u.Ck]="unexpected",p)];case 6:return[2]}}))}))}),[s,l,r,o,t]);return a.createElement(g.l0,{onSubmit:k,initialValues:Fe},(function(e){var n=e.handleSubmit,l=e.submitting,r=e.submitFailed,o=e.error,c=e.hasValidationErrors,u=e.submitError;return a.createElement(a.Fragment,null,a.createElement(b.Z,{disableTypography:!0},a.createElement(N.Z,{variant:"h5"},"Create a role")),a.createElement(S.Z,null,a.createElement("form",{onSubmit:n},a.createElement(g.gN,{component:z,name:"name",validate:L.C1,placeholder:"Enter role name",label:"Name",fullWidth:!0,margin:"normal",errors:{required:"Enter a role name",reserved:"This is a reserved name, please use another",taken:"Role with this name already exists",invalid:a.createElement(a.Fragment,null,"Enter a"," ",a.createElement("abbr",{title:"Must start with a letter and contain only alphanumeric characters and underscores thereafter"},"valid")," ","role name")}}),a.createElement(Z.Z,{label:"Manually set ARN instead of configuring policies",control:a.createElement(C.Z,{checked:!s}),onChange:function(){return p(!s)}}),a.createElement(F.Z,{in:!s},a.createElement(g.gN,{component:z,name:"arn",validate:s?void 0:L.C1,key:"".concat(s),placeholder:"Enter role ARN",label:"ARN",fullWidth:!0,margin:"normal",disabled:s,errors:{required:"Enter an ARN"}})),a.createElement(F.Z,{in:s},a.createElement(g.gN,{className:i.panel,component:me,name:"policies",fullWidth:!0,margin:"normal",onAdvanced:function(){return p(!1)}})),r&&a.createElement(G,{error:o||u,errors:{unexpected:"Something went wrong"}}),a.createElement("input",{type:"submit",style:{display:"none"}}))),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return t("cancel")},color:"primary",disabled:l},"Cancel"),a.createElement(R.Z,{onClick:n,color:"primary",disabled:l||r&&c},"Create")),l&&a.createElement("div",{className:i.lock},a.createElement(_.Z,{size:80})))}))}function Ne(e){var n=this,t=e.role,i=e.close,l=W.D$().push,r=E.Db(ge)[1],o=a.useCallback((function(){return(0,c.mG)(n,void 0,void 0,(function(){var e,n,a;return(0,c.Jh)(this,(function(o){switch(o.label){case 0:i(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r({id:t.id})];case 2:if((e=o.sent()).error)throw e.error;if(!e.data)throw new Error("No data");switch((n=e.data.roleDelete).__typename){case"RoleDeleteSuccess":case"RoleDoesNotExist":return[2];case"RoleNameReserved":return l('Unable to delete reserved role "'.concat(t.name,'"')),[2];case"RoleAssigned":return l('Unable to delete role "'.concat(t.name,'" assigned to some user(s). Unassign this role from everyone and try again.')),[2];default:(0,J.Z)(n)}return[3,4];case 3:return a=o.sent(),l('Error deleting role "'.concat(t.name,'"')),console.error("Error deleting role"),console.error(a),[3,4];case 4:return[2]}}))}))}),[i,l,r,t.id,t.name]);return a.createElement(a.Fragment,null,a.createElement(b.Z,null,"Delete a role"),a.createElement(S.Z,null,'You are about to delete the "',t.name,'" role. This operation is irreversible.'),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return i("cancel")},color:"primary"},"Cancel"),a.createElement(R.Z,{onClick:o,color:"primary"},"Delete")))}function Se(e){var n=this,t=e.role,i=e.close,l=W.D$().push,r=E.Db(Ee)[1],o=a.useCallback((function(){return(0,c.mG)(n,void 0,void 0,(function(){var e,n,a;return(0,c.Jh)(this,(function(o){switch(o.label){case 0:i(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r({id:t.id})];case 2:if((e=o.sent()).error)throw e.error;if(!e.data)throw new Error("No data");switch((n=e.data.roleSetDefault).__typename){case"RoleDoesNotExist":throw new Error(n.__typename);case"RoleSetDefaultSuccess":return[2];default:(0,J.Z)(n)}return[3,4];case 3:return a=o.sent(),l('Error setting default role "'.concat(t.name,'"')),console.error("Error setting default role"),console.error(a),[3,4];case 4:return[2]}}))}))}),[i,l,r,t.id,t.name]);return a.createElement(a.Fragment,null,a.createElement(b.Z,null,"Set default role"),a.createElement(S.Z,null,'You are about to make "',t.name,'" the default role for all new users. Are you sure you want to do this?'),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return i("cancel")},color:"primary"},"Cancel"),a.createElement(R.Z,{onClick:o,color:"primary"},"Set default")))}var Ze={name:p.Z(s.Z("name"),$.Jx(m.string),k.Z,$.Jx($.CM)),arn:p.Z(s.Z("arn"),$.Jx(m.string),k.Z,$.Jx($.CM))},Ce={name:p.Z(s.Z("name"),$.Jx(m.string),k.Z,$.Jx($.CM)),policies:p.Z(s.Z("policies"),$.Jx(m.array(m.type({id:m.string}))),v.Z("id"),$.Jx(m.readonlyArray($.CM)))},Fe={managed:!0,policies:[]};function De(e){var n=this,t=e.role,i=e.close,l=E.Db(ve)[1],r=E.Db(fe)[1],o="ManagedRole"===t.__typename,m=a.useCallback((function(e){return(0,c.mG)(n,void 0,void 0,(function(){var n,a,m,s,p;return(0,c.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),n=void 0,o?(a=d.Z(Ce)(e),[4,l({input:a,id:t.id})]):[3,2];case 1:return n=c.sent(),[3,4];case 2:return a=d.Z(Ze)(e),[4,r({input:a,id:t.id})];case 3:n=c.sent(),c.label=4;case 4:if(n.error)throw n.error;if(!n.data)throw new Error("No data");switch((m=n.data.roleUpdate).__typename){case"RoleUpdateSuccess":return i(),[2,void 0];case"RoleNameReserved":return[2,{name:"reserved"}];case"RoleNameExists":return[2,{name:"taken"}];case"RoleNameInvalid":return[2,{name:"invalid"}];case"RoleHasTooManyPoliciesToAttach":return[2,{policies:"Too many policies to attach"}];case"RoleIsManaged":case"RoleIsUnmanaged":throw new Error(m.__typename);default:return[2,(0,J.Z)(m)]}return[3,6];case 5:return s=c.sent(),console.error("Error updating role"),console.error(s),[2,(p={},p[u.Ck]="unexpected",p)];case 6:return[2]}}))}))}),[o,t.id,l,r,i]),s=he(),p=a.useMemo((function(){return{name:t.name,policies:"ManagedRole"===t.__typename?t.policies:[],arn:"UnmanagedRole"===t.__typename?t.arn:null}}),[t]),k=a.createElement(a.Fragment,null,"Edit"," ",o?a.createElement("abbr",{title:"This IAM role is created and managed by Quilt"},"Quilt"):a.createElement("abbr",{title:"This IAM role is provided and managed by you or another administrator"},"custom")," ",'role "',t.name,'"'),v="Edit ".concat(o?"Quilt":"custom",' role "').concat(t.name,'"');return a.createElement(g.l0,{onSubmit:m,initialValues:p},(function(e){var n=e.handleSubmit,l=e.submitting,r=e.submitFailed,c=e.error,u=e.pristine,m=e.hasValidationErrors,d=e.submitError;return a.createElement(a.Fragment,null,a.createElement(b.Z,{className:s.title,title:v},k),a.createElement(S.Z,null,a.createElement("form",{onSubmit:n},a.createElement(g.gN,{component:z,name:"name",validate:L.C1,placeholder:"Enter role name",label:"Name",fullWidth:!0,margin:"normal",errors:{required:"Enter a role name",reserved:"This is a reserved name, please use another",taken:"Role with this name already exists",invalid:"Invalid name for role"}}),o?a.createElement(a.Fragment,null,a.createElement(A.Z,{value:t.arn,label:"ARN",fullWidth:!0,margin:"normal",disabled:!0}),a.createElement(g.gN,{className:s.panel,component:me,name:"policies",fullWidth:!0,margin:"normal"})):a.createElement(g.gN,{component:z,name:"arn",validate:L.C1,placeholder:"Enter role ARN",label:"ARN",fullWidth:!0,margin:"normal",errors:{required:"Enter an ARN"}}),r&&a.createElement(G,{error:c||d,errors:{unexpected:"Something went wrong"}}),a.createElement("input",{type:"submit",style:{display:"none"}}))),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return i("cancel")},color:"primary",disabled:l},"Cancel"),a.createElement(R.Z,{onClick:n,color:"primary",disabled:u||l||r&&m},"Save")),l&&a.createElement("div",{className:s.lock},a.createElement(_.Z,{size:80})))}))}function Re(e){var n=e.role,t=e.openDialog,i=a.useCallback((function(){t((function(e){var t=e.close;return a.createElement(Ne,(0,c.pi)({},{role:n,close:t}))}))}),[t,n]),l=a.useCallback((function(){t((function(e){var t=e.close;return a.createElement(Se,(0,c.pi)({},{role:n,close:t}))}))}),[t,n]),r=a.useState(null),o=r[0],u=r[1],m=a.useCallback((function(e){u(e.currentTarget)}),[u]),s=a.useCallback((function(){u(null)}),[u]),d=a.useCallback((function(){s(),l()}),[s,l]),p=a.useCallback((function(){s(),i()}),[s,i]);return a.createElement(a.Fragment,null,a.createElement(y.ZP,{title:"Settings"},a.createElement(w.Z,{"aria-label":"Settings",onClick:m},a.createElement(T.Z,null,"more_vert"))),a.createElement(I.Z,{anchorEl:o,keepMounted:!0,open:!!o,onClose:s},a.createElement(P.Z,{onClick:d},"Set as default"),a.createElement(P.Z,{onClick:p},"Delete")))}function _e(){var e,n=E.aM({query:de})[0].data,t=n.roles,i=null===(e=n.defaultRole)||void 0===e?void 0:e.id,l=j.Pl({rows:t,column:ye[0]}),r=q.D(),o=[{title:"Create",icon:a.createElement(T.Z,null,"add"),fn:a.useCallback((function(){r.open((function(e){var n=e.close;return a.createElement(be,(0,c.pi)({},{close:n}))}))}),[r.open])}];return a.createElement(a.Suspense,{fallback:a.createElement(x.Z,null,a.createElement(j.o8,{heading:"Roles"}),a.createElement(j.Ex,null))},a.createElement(x.Z,null,r.render({fullWidth:!0,maxWidth:"sm"}),a.createElement(j.o8,{heading:"Roles",actions:o}),a.createElement(j.im,null,a.createElement(M.Z,null,a.createElement(j.Fb,{columns:ye,ordering:l,withInlineActions:!0}),a.createElement(V.Z,null,l.ordered.map((function(e){return a.createElement(U.Z,{hover:!0,key:e.id},ye.map((function(n){return a.createElement(O.Z,(0,c.pi)({key:n.id},n.props),(n.getDisplay||f.Z)(n.getValue(e),e,{defaultRoleId:i}))})),a.createElement(O.Z,{align:"right",padding:"none"},a.createElement(j.xS,{actions:(n=e,[n.arn?{title:"Open AWS Console",icon:a.createElement(T.Z,null,"launch"),href:re(n.arn)}:null,{title:"Edit",icon:a.createElement(T.Z,null,"edit"),fn:function(){r.open((function(e){var t=e.close;return a.createElement(De,(0,c.pi)({},{role:n,close:t}))}))}}])},a.createElement(Re,{role:e,openDialog:r.open}))));var n})))))))}var Ae=t(56858),we=t(30757);function Te(e){var n=e.open,t=e.onClose,l=e.roles,r=e.attachRoles,o=a.useState([]),c=o[0],u=o[1],m=a.useState(!1),s=m[0],d=m[1],p=a.useCallback((function(){s&&r(c),d(!1),u([])}),[r,s,c,d,u]),k=a.useCallback((function(){d(!0),t()}),[t,d]),v=a.useCallback((function(e){u((function(n){return n.includes(e)?n.filter((function(n){return n.id!==e.id})):n.concat(e)}))}),[u]);return a.createElement(Q.Z,{maxWidth:"xs",open:n,onClose:t,onExited:p},a.createElement(b.Z,null,"Attach policy to roles"),a.createElement(S.Z,{dividers:!0},l.length?l.map((function(e){return a.createElement(Z.Z,{key:e.id,style:{display:"flex",marginRight:0},disabled:e.policies.length>=5,control:a.createElement(C.Z,{checked:c.includes(e),onChange:function(){return v(e)},color:"primary"}),label:a.createElement(a.Fragment,null,e.name," ",a.createElement(i.Z,{component:"span",color:"text.secondary"},"(",e.policies.length," / ",5," policies)"))})})):a.createElement(N.Z,null,"No more roles to attach this policy to")),a.createElement(D.Z,null,a.createElement(R.Z,{autoFocus:!0,onClick:t,color:"primary"},"Cancel"),a.createElement(R.Z,{onClick:k,disabled:!c.length,color:"primary"},"Attach")))}function Ie(e){var n=e.className,t=e.input,l=t.value,r=t.onChange,o=e.meta,u=o.submitFailed&&(o.error||!o.dirtySinceLastSubmit&&o.submitError),m=(0,te.ZP)({query:de}),s=a.useState(!1),d=s[0],p=s[1],k=a.useCallback((function(){p(!0)}),[p]),v=a.useCallback((function(){p(!1)}),[p]),f=a.useCallback((function(e){r(l.concat(e))}),[r,l]),g=a.useMemo((function(){return m.case({fetching:function(){return null},error:function(){return null},data:function(e){var n=e.roles,t=l.reduce((function(e,n){var t,a=n.id;return(0,c.pi)((0,c.pi)({},e),((t={})[a]=!0,t))}),{});return n.filter((function(e){return"ManagedRole"===e.__typename&&!t[e.id]}))}})}),[m,l]);return a.createElement("div",{className:n},a.createElement(i.Z,{display:"flex",alignItems:"center"},a.createElement(N.Z,{variant:"h6"},"Associated roles"),m.case({data:function(){return null},fetching:function(){return a.createElement(y.ZP,{arrow:!0,title:"Fetching roles"},a.createElement(_.Z,{size:20,style:{opacity:.3,marginLeft:"8px"}}))},error:function(e){return a.createElement(y.ZP,{arrow:!0,title:a.createElement(a.Fragment,null,"Error fetching roles: ",e.message)},a.createElement(T.Z,{style:{opacity:.3,marginLeft:"8px"}},"error"))}})),a.createElement(F.Z,{in:!!u},a.createElement(K.Z,{error:!0},u||" ")),a.createElement(X.Z,{dense:!0,disablePadding:!0},l.map((function(e){return a.createElement(Y.Z,{key:e.id,divider:!0,disableGutters:!0},a.createElement(H.Z,null,e.name),a.createElement(ee.Z,{style:{right:0}},a.createElement(y.ZP,{title:"Detach current policy from this role"},a.createElement(w.Z,{onClick:function(){return function(e){r(l.filter((function(n){return n.id!==e.id})))}(e)},edge:"end",size:"small"},a.createElement(T.Z,{fontSize:"small"},"clear")))))})),!!(null==g?void 0:g.length)&&a.createElement(Y.Z,{button:!0,disableGutters:!0,onClick:k},a.createElement(H.Z,null,!l.length&&a.createElement(a.Fragment,null,"No associated roles. "),"Attach current policy to rolesâ€¦"))),g&&a.createElement(Te,{roles:g,open:d,onClose:v,attachRoles:f}))}var Pe=t(87462),xe=t(45987),Me=t(86010),Ve=t(14670),Ue=t(66987),Oe=a.forwardRef((function(e,n){var t=e.classes,i=e.className,l=(0,xe.Z)(e,["classes","className"]),r=a.useContext(Ue.Z);return a.createElement("div",(0,Pe.Z)({className:(0,Me.Z)(t.root,i,"flex-start"===r.alignItems&&t.alignItemsFlexStart),ref:n},l))}));const We=(0,Ve.Z)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(Oe);var qe=t(33901),Je=t(82488),$e=t.n(Je),Le={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_Buckets"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"buckets"},name:{kind:"Name",value:"bucketConfigs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"iconUrl"}}]}}]}}]},ze=Ae.uU.F$;function Be(e){var n=e.open,t=e.onClose,l=e.buckets,r=e.addBucket,o=a.useState(null),c=o[0],u=o[1],m=a.useCallback((function(){c&&r(c),u(null)}),[r,c,u]),s=a.useCallback((function(e){u(e),t()}),[t,u]);return a.createElement(Q.Z,{maxWidth:"xs",open:n,onClose:t,onExited:m},a.createElement(b.Z,null,"Add a bucket"),l.length?a.createElement(X.Z,null,l.map((function(e){return a.createElement(Y.Z,{key:e.name,button:!0,onClick:function(){return s(e)}},a.createElement(We,{style:{minWidth:44}},a.createElement(qe.Z,{style:{width:32,height:32},src:e.iconUrl||$e()})),a.createElement(H.Z,null,"s3://",e.name," ",a.createElement(i.Z,{component:"span",color:"text.secondary",ml:.5},e.title)))}))):a.createElement(S.Z,null,a.createElement(N.Z,null,"No more buckets to add")),a.createElement(D.Z,null,a.createElement(R.Z,{autoFocus:!0,onClick:t,color:"primary"},"Cancel")))}var Ge=h.Z((function(e){return{heading:{alignItems:"center",display:"flex"},icon:{marginLeft:e.spacing(.5)}}}));function je(e){var n=e.className,t=e.input,l=t.value,r=t.onChange,o=e.meta,u=e.errors,m=e.onAdvanced,s=Ge(),d=o.submitFailed&&(o.error||!o.dirtySinceLastSubmit&&o.submitError),p=(0,te.ZP)({query:Le}),k=a.useState(null),v=k[0],f=k[1],g=function(e,n){f({anchorEl:e.currentTarget,perm:n})},E=function(){f(null)},h=function(e){return function(){var n,t=(null!==(n=null==v?void 0:v.perm)&&void 0!==n?n:{}).bucket;t&&r(e?l.map((function(n){return n.bucket.name===t.name?(0,c.pi)((0,c.pi)({},n),{bucket:t,level:e}):n})):l.filter((function(e){return e.bucket.name!==t.name}))),E()}},b=a.useState(!1),S=b[0],Z=b[1],C=a.useCallback((function(){Z(!0)}),[Z]),D=a.useCallback((function(){Z(!1)}),[Z]),R=a.useCallback((function(e){r(l.concat({__typename:"PolicyBucketPermission",bucket:e,level:ze.READ}))}),[r,l]),A=a.useMemo((function(){return p.case({fetching:function(){return null},error:function(){return null},data:function(e){var n=e.buckets,t=l.reduce((function(e,n){var t,a=n.bucket.name;return(0,c.pi)((0,c.pi)({},e),((t={})[a]=!0,t))}),{});return n.filter((function(e){return!t[e.name]}))}})}),[p,l]);return a.createElement("div",{className:n},a.createElement("div",{className:s.heading},a.createElement(N.Z,{variant:"h6"},"Bucket access"),a.createElement(y.ZP,{arrow:!0,title:a.createElement(a.Fragment,null,"Admin users can see all the buckets, but can only access the contents of the buckets according to their assigned role (policies). Regular users can only see the buckets configured in their assigned role (policies).")},a.createElement(T.Z,{fontSize:"small",color:"disabled",className:s.icon},"info_outlined")),p.case({data:function(){return null},fetching:function(){return a.createElement(y.ZP,{arrow:!0,title:"Fetching buckets"},a.createElement(_.Z,{size:20,style:{opacity:.3},className:s.icon}))},error:function(e){return a.createElement(y.ZP,{arrow:!0,title:a.createElement(a.Fragment,null,"Error fetching buckets: ",e.message)},a.createElement(T.Z,{fontSize:"small",color:"disabled",className:s.icon},"error"))}})),!!m&&a.createElement(K.Z,null,"Manage access using per-bucket permissions or"," ",a.createElement(ne.Z,{onClick:m},"set existing policy via ARN")),a.createElement(F.Z,{in:!!d},a.createElement(K.Z,{error:!0},d?u[d]||d:" ")),a.createElement(X.Z,{dense:!0,disablePadding:!0},l.map((function(e){return a.createElement(Y.Z,{key:e.bucket.name,disableGutters:!0,button:!0,onClick:function(n){return g(n,e)}},a.createElement(We,{style:{minWidth:44}},a.createElement(qe.Z,{style:{width:32,height:32},src:e.bucket.iconUrl||$e()})),a.createElement(H.Z,{primary:a.createElement(a.Fragment,null,"s3://",e.bucket.name," ",a.createElement(i.Z,{component:"span",color:"text.secondary",ml:.5},e.bucket.title))}),a.createElement(ee.Z,{style:{right:0}},a.createElement(y.ZP,{title:"Read-".concat(e.level===ze.READ?"only":"write"," access")},a.createElement(w.Z,{onClick:function(n){return g(n,e)},edge:"end",size:"small"},a.createElement(T.Z,null,e.level===ze.READ?"visibility":"edit")))))})),!!(null==A?void 0:A.length)&&a.createElement(Y.Z,{button:!0,disableGutters:!0,onClick:C},a.createElement(We,{style:{minWidth:44}},a.createElement(qe.Z,{style:{width:32,height:32}},a.createElement(T.Z,null,"add"))),a.createElement(H.Z,null,!l.length&&a.createElement(a.Fragment,null,"No buckets selected. "),"Add a bucketâ€¦"))),A&&a.createElement(Be,{buckets:A,open:S,onClose:D,addBucket:R}),a.createElement(I.Z,{anchorEl:null==v?void 0:v.anchorEl,keepMounted:!0,open:!!(null==v?void 0:v.anchorEl),onClose:E},a.createElement(P.Z,{onClick:h(ze.READ),selected:(null==v?void 0:v.perm.level)===ze.READ},a.createElement(T.Z,null,"visibility"),"Â Â Read-only access"),a.createElement(P.Z,{onClick:h(ze.READ_WRITE),selected:(null==v?void 0:v.perm.level)===ze.READ_WRITE},a.createElement(T.Z,null,"edit"),"Â Â Read-write access"),a.createElement(P.Z,{onClick:h(null)},a.createElement(T.Z,null,"clear"),"Â Â No access")))}var Qe={kind:"Document",definitions:(0,c.ev)([{kind:"FragmentDefinition",name:{kind:"Name",value:"PolicyResultSelection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PolicyResult"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Policy"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PolicySelection"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"InvalidInput"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"}},{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OperationError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}],oe.definitions,!0)},Xe={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_PolicyCreateManaged"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ManagedPolicyInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"policyCreate"},name:{kind:"Name",value:"policyCreateManaged"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PolicyResultSelection"}}]}}]}}],Qe.definitions,!0)},Ye={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_PolicyCreateUnmanaged"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedPolicyInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"policyCreate"},name:{kind:"Name",value:"policyCreateUnmanaged"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PolicyResultSelection"}}]}}]}}],Qe.definitions,!0)},He={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_PolicyUpdateManaged"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ManagedPolicyInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"policyUpdate"},name:{kind:"Name",value:"policyUpdateManaged"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PolicyResultSelection"}}]}}]}}],Qe.definitions,!0)},Ke={kind:"Document",definitions:(0,c.ev)([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_PolicyUpdateUnmanaged"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedPolicyInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"policyUpdate"},name:{kind:"Name",value:"policyUpdateUnmanaged"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PolicyResultSelection"}}]}}]}}],Qe.definitions,!0)},en={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"containers_Admin_RolesAndPolicies_gql_PolicyDelete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"policyDelete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"InvalidInput"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"}},{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OperationError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]},nn=(0,L.ZP)("nonEmptyString",L.wB(/\S/)),tn=[{id:"title",label:"Title",getValue:s.Z("title"),props:{component:"th",scope:"row"}},{id:"source",label:"Source",getValue:function(e){return e.managed},getDisplay:function(e){return e?a.createElement("abbr",{title:"This IAM policy is created and managed by Quilt"},"Quilt"):a.createElement("abbr",{title:"This IAM policy is provided and managed by you or another administrator"},"Custom")}},{id:"buckets",label:"Buckets",getValue:function(e){return e.managed?e.permissions.length:null},getDisplay:function(e,n){return n.managed?a.createElement(y.ZP,{arrow:!0,title:n.permissions.length?a.createElement(i.Z,{component:"ul",pl:1,m:.5},n.permissions.map((function(e){return a.createElement("li",{key:e.bucket.name},e.bucket.name," (",e.level,")")}))):""},a.createElement("span",null,n.permissions.length)):"N/A"}},{id:"roles",label:"Associated roles",getValue:function(e){return e.managed?e.roles.length:null},getDisplay:function(e,n){return a.createElement(y.ZP,{arrow:!0,title:n.roles.length?a.createElement(i.Z,{component:"ul",pl:1,m:.5},n.roles.map((function(e){return a.createElement("li",{key:e.id},e.name)}))):""},a.createElement("span",null,n.roles.length))}}],an={permissions:[],roles:[]},ln=h.Z((function(e){return{lock:{alignItems:"center",background:"rgba(255,255,255,0.9)",bottom:52,cursor:"not-allowed",display:"flex",flexDirection:"column",justifyContent:"center",left:0,position:"absolute",right:0,top:64,zIndex:3},title:{"&>*":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},panel:{marginTop:e.spacing(2)}}}));function rn(e){var n=this,t=e.close,i=ln(),l=E.Db(Xe)[1],r=E.Db(Ye)[1],o=W.D$().push,u=a.useState(!0),m=u[0],s=u[1],p=a.useCallback((function(e){return(0,c.mG)(n,void 0,void 0,(function(){var n,a,i,u;return(0,c.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),n=void 0,m?(a=d.Z(mn)(e),[4,l({input:a})]):[3,2];case 1:return n=c.sent(),[3,4];case 2:return a=d.Z(cn)(e),[4,r({input:a})];case 3:n=c.sent(),c.label=4;case 4:if(n.error)throw n.error;if(!n.data)throw new Error("No data");switch((i=n.data.policyCreate).__typename){case"Policy":return o('Policy "'.concat(i.title,'" created')),t(),[2,void 0];case"InvalidInput":return[2,(0,we.k)(i.errors,{"input.arn":"arn","input.roles":"roles","input.title":"title"})];case"OperationError":return[2,(0,we.D)(i.message)];default:return[2,(0,J.Z)(i)]}return[3,6];case 5:return u=c.sent(),console.error("Error creating policy"),console.error(u),[2,(0,we.D)("unexpected")];case 6:return[2]}}))}))}),[m,l,r,o,t]);return a.createElement(g.l0,{onSubmit:p,initialValues:an},(function(e){var n=e.handleSubmit,l=e.submitting,r=e.submitFailed,o=e.error,c=e.hasValidationErrors,u=e.submitError;return a.createElement(a.Fragment,null,a.createElement(b.Z,{disableTypography:!0},a.createElement(N.Z,{variant:"h5"},"Create a policy")),a.createElement(S.Z,null,a.createElement("form",{onSubmit:n},a.createElement(g.gN,{component:z,name:"title",validate:L.O$(L.C1,nn),placeholder:"Enter policy title",label:"Title",fullWidth:!0,margin:"normal",errors:{required:"Enter a policy title",nonEmptyString:"Enter a non-empty policy title"}}),a.createElement(Z.Z,{label:"Manually set ARN instead of configuring per-bucket permissions",control:a.createElement(C.Z,{checked:!m}),onChange:function(){return s(!m)}}),a.createElement(F.Z,{in:!m},a.createElement(g.gN,{component:z,name:"arn",validate:m?void 0:L.C1,key:"".concat(m),placeholder:"Enter policy ARN",label:"ARN",fullWidth:!0,margin:"normal",errors:{required:"Enter an ARN"}})),a.createElement(F.Z,{in:m},a.createElement(g.gN,{className:i.panel,component:je,name:"permissions",fullWidth:!0,margin:"normal",onAdvanced:function(){return s(!1)}})),a.createElement(g.gN,{className:i.panel,component:Ie,name:"roles",fullWidth:!0,margin:"normal"}),r&&a.createElement(G,{error:o||u,errors:{unexpected:"Something went wrong"}}),a.createElement("input",{type:"submit",style:{display:"none"}}))),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return t("cancel")},color:"primary",disabled:l},"Cancel"),a.createElement(R.Z,{onClick:n,color:"primary",disabled:l||r&&c},"Create")),l&&a.createElement("div",{className:i.lock},a.createElement(_.Z,{size:80})))}))}function on(e){var n=this,t=e.policy,i=e.close,l=W.D$().push,r=E.Db(en)[1],o=a.useCallback((function(){return(0,c.mG)(n,void 0,void 0,(function(){var e,n,a;return(0,c.Jh)(this,(function(o){switch(o.label){case 0:i(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r({id:t.id})];case 2:if((e=o.sent()).error)throw e.error;if(!e.data)throw new Error("No data");switch((n=e.data.policyDelete).__typename){case"Ok":return[2];case"InvalidInput":return l('Unable to delete policy "'.concat(t.title,'"')),[2];case"OperationError":return l('Unable to delete policy "'.concat(t.title,'": ').concat(n.message)),[2];default:(0,J.Z)(n)}return[3,4];case 3:return a=o.sent(),l('Error deleting policy "'.concat(t.title,'"')),console.error("Error deleting policy"),console.error(a),[3,4];case 4:return[2]}}))}))}),[i,l,r,t.id,t.title]);return a.createElement(a.Fragment,null,a.createElement(b.Z,null,"Delete a policy"),a.createElement(S.Z,null,'You are about to delete the "',t.title,'" policy. This operation is irreversible.'),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return i("cancel")},color:"primary"},"Cancel"),a.createElement(R.Z,{onClick:o,color:"primary"},"Delete")))}var cn={title:p.Z(s.Z("title"),$.Jx(m.string),k.Z,$.Jx($.CM)),arn:p.Z(s.Z("arn"),$.Jx(m.string),k.Z,$.Jx($.CM)),roles:p.Z(s.Z("roles"),$.Jx(m.array(m.type({id:m.string}))),v.Z("id"),$.Jx(m.readonlyArray($.CM)))},un=m.type({bucket:m.string,level:Ae.F$},"PermissionInput"),mn={title:p.Z(s.Z("title"),$.Jx(m.string),k.Z,$.Jx($.CM)),roles:p.Z(s.Z("roles"),$.Jx(m.array(m.type({id:m.string}))),v.Z("id"),$.Jx(m.readonlyArray($.CM))),permissions:p.Z((function(e){return(e.permissions||[]).map((function(e){return{bucket:e.bucket.name,level:e.level}}))}),$.Jx(m.readonlyArray(un)))};function sn(e){var n=this,t=e.policy,i=e.close,l=E.Db(He)[1],r=E.Db(Ke)[1],o=a.useCallback((function(e){return(0,c.mG)(n,void 0,void 0,(function(){var n,a,o,u;return(0,c.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),n=void 0,t.managed?(a=d.Z(mn)(e),[4,l({input:a,id:t.id})]):[3,2];case 1:return n=c.sent(),[3,4];case 2:return a=d.Z(cn)(e),[4,r({input:a,id:t.id})];case 3:n=c.sent(),c.label=4;case 4:if(n.error)throw n.error;if(!n.data)throw new Error("No data");switch((o=n.data.policyUpdate).__typename){case"Policy":return i(),[2,void 0];case"InvalidInput":return[2,(0,we.k)(o.errors,{"input.arn":"arn","input.roles":"roles","input.title":"title"})];case"OperationError":return[2,(0,we.D)(o.message)];default:return[2,(0,J.Z)(o)]}return[3,6];case 5:return u=c.sent(),console.error("Error updating policy"),console.error(u),[2,(0,we.D)("unexpected")];case 6:return[2]}}))}))}),[t.id,t.managed,l,r,i]),u=ln(),m=a.useMemo((function(){return{title:t.title,permissions:t.permissions,roles:t.roles,arn:t.managed?null:t.arn}}),[t]),s=a.createElement(a.Fragment,null,"Edit"," ",t.managed?a.createElement("abbr",{title:"This IAM policy is created and managed by Quilt"},"Quilt"):a.createElement("abbr",{title:"This IAM policy is provided and managed by you or another administrator"},"custom")," ",'policy "',t.title,'"'),p="Edit ".concat(t.managed?"Quilt":"custom",' policy "').concat(t.title,'"');return a.createElement(g.l0,{onSubmit:o,initialValues:m},(function(e){var n=e.handleSubmit,l=e.submitting,r=e.submitFailed,o=e.error,c=e.pristine,m=e.hasValidationErrors,d=e.submitError;return a.createElement(a.Fragment,null,a.createElement(b.Z,{className:u.title,title:p},s),a.createElement(S.Z,null,a.createElement("form",{onSubmit:n},a.createElement(g.gN,{component:z,name:"title",validate:L.O$(L.C1,nn),placeholder:"Enter policy title",label:"Title",fullWidth:!0,margin:"normal",errors:{required:"Enter a policy title",nonEmptyString:"Enter a non-empty policy title"}}),t.managed?a.createElement(a.Fragment,null,a.createElement(A.Z,{value:t.arn,label:"ARN",fullWidth:!0,margin:"normal",disabled:!0}),a.createElement(g.gN,{className:u.panel,component:je,name:"permissions",fullWidth:!0,margin:"normal"})):a.createElement(g.gN,{component:z,name:"arn",validate:L.C1,placeholder:"Enter policy ARN",label:"ARN",fullWidth:!0,margin:"normal",errors:{required:"Enter an ARN"}}),a.createElement(g.gN,{className:u.panel,component:Ie,name:"roles",fullWidth:!0,margin:"normal"}),r&&a.createElement(G,{error:o||d,errors:{unexpected:"Something went wrong"}}),a.createElement("input",{type:"submit",style:{display:"none"}}))),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return i("cancel")},color:"primary",disabled:l},"Cancel"),a.createElement(R.Z,{onClick:n,color:"primary",disabled:c||l||r&&m},"Save")),l&&a.createElement("div",{className:u.lock},a.createElement(_.Z,{size:80})))}))}function dn(e){var n=e.policy,t=e.openDialog,i=a.useCallback((function(){t((function(e){var t=e.close;return a.createElement(on,(0,c.pi)({},{policy:n,close:t}))}))}),[t,n]),l=a.useState(null),r=l[0],o=l[1],u=a.useCallback((function(e){o(e.currentTarget)}),[o]),m=a.useCallback((function(){o(null)}),[o]),s=a.useCallback((function(){m(),i()}),[m,i]);return a.createElement(a.Fragment,null,a.createElement(y.ZP,{title:"Settings"},a.createElement(w.Z,{"aria-label":"Settings",onClick:u},a.createElement(T.Z,null,"more_vert"))),a.createElement(I.Z,{anchorEl:r,keepMounted:!0,open:!!r,onClose:m},a.createElement(P.Z,{onClick:s},"Delete")))}function pn(){var e=E.aM({query:ce})[0].data.policies,n=j.Pl({rows:e,column:tn[0]}),t=q.D(),i=[{title:"Create",icon:a.createElement(T.Z,null,"add"),fn:a.useCallback((function(){t.open((function(e){var n=e.close;return a.createElement(rn,(0,c.pi)({},{close:n}))}))}),[t.open])}];return a.createElement(a.Suspense,{fallback:a.createElement(x.Z,null,a.createElement(j.o8,{heading:"Policies"}),a.createElement(j.Ex,null))},a.createElement(x.Z,null,t.render({fullWidth:!0,maxWidth:"sm"}),a.createElement(j.o8,{heading:"Policies",actions:i}),a.createElement(j.im,null,a.createElement(M.Z,null,a.createElement(j.Fb,{columns:tn,ordering:n,withInlineActions:!0}),a.createElement(V.Z,null,n.ordered.map((function(e){return a.createElement(U.Z,{hover:!0,key:e.id},tn.map((function(n){return a.createElement(O.Z,(0,c.pi)({key:n.id},n.props),(n.getDisplay||f.Z)(n.getValue(e),e))})),a.createElement(O.Z,{align:"right",padding:"none"},a.createElement(j.xS,{actions:(n=e,[n.arn?{title:"Open AWS Console",icon:a.createElement(T.Z,null,"launch"),href:re(n.arn)}:null,{title:"Edit",icon:a.createElement(T.Z,null,"edit"),fn:function(){t.open((function(e){var t=e.close;return a.createElement(sn,(0,c.pi)({},{policy:n,close:t}))}))}}])},a.createElement(dn,{policy:e,openDialog:t.open}))));var n})))))))}var kn=t(94184),vn=t.n(kn),fn=t(61889),gn=t(68981),En=t(66115),yn=t(16946),hn=t(9570),bn=t(26209),Nn=t(22966),Sn=t(98763),Zn=t(21587),Cn=o.SN({name:"Admin.data.users",fetch:function(e){return(0,e.req)({endpoint:"/users/list?_cachebust=".concat(Math.random())}).then(p.Z(s.Z("results"),gn.Z((function(e){return{dateJoined:new Date(e.date_joined),email:e.email,isActive:e.is_active,isAdmin:e.is_superuser,lastLogin:new Date(e.last_login),username:e.username,roleId:e.role_id}}))))},key:function(){return null}}),Fn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"containers_Admin_Users_gql_Roles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ManagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"defaultRole"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UnmanagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ManagedRole"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]},Dn=h.Z((function(e){return{root:{fontFamily:e.typography.monospace.fontFamily}}}));function Rn(e){var n=e.className,t=e.children,i=Dn();return a.createElement("span",{className:vn()(n,i.root)},t)}var _n=h.Z({infoIcon:{fontSize:"1.25em",verticalAlign:"-3px"}});function An(e){var n=this,t=e.close,i=e.roles,r=e.defaultRoleId,m=_n(),s=l.D$(),d=o.D$(),p=W.D$().push,k=a.useCallback((function(e){var a=e.username,r=e.email,o=e.roleId;return(0,c.mG)(n,void 0,void 0,(function(){var e,n,m,k,v,f;return(0,c.Jh)(this,(function(c){switch(c.label){case 0:e=i.find((function(e){return e.id===o})),c.label=1;case 1:return c.trys.push([1,7,,8]),[4,s({endpoint:"/users/create",method:"POST",body:JSON.stringify({username:a,email:r})})];case 2:c.sent(),n={dateJoined:new Date,email:r,isActive:!0,isAdmin:!1,lastLogin:new Date,username:a},c.label=3;case 3:return c.trys.push([3,5,,6]),[4,s({method:"POST",endpoint:"/users/set_role",body:JSON.stringify({username:a,role:e.name})})];case 4:return c.sent(),n.roleId=e.id,[3,6];case 5:return m=c.sent(),console.error("Error setting role",{username:a,role:e}),console.dir(m),[3,6];case 6:return d.patchOk(Cn,null,fn.Z(n)),p("User invited"),t(),[3,8];case 7:return k=c.sent(),l.Bb.is(k,400,/Username is not valid/)?[2,{username:"invalid"}]:l.Bb.is(k,409,/Username already taken/)?[2,{username:"taken"}]:l.Bb.is(k,400,/Invalid email/)?[2,{email:"invalid"}]:l.Bb.is(k,409,/Email already taken/)?[2,{email:"taken"}]:l.Bb.is(k,500,/SMTP.*invalid/)?[2,(v={},v[u.Ck]="smtp",v)]:(console.error("Error creating user"),console.dir(k),[2,(f={},f[u.Ck]="unexpected",f)]);case 8:return[2]}}))}))}),[s,d,p,t,i]);return a.createElement(g.l0,{onSubmit:k,initialValues:{roleId:r||i[0].id}},(function(e){var n=e.handleSubmit,l=e.submitting,r=e.submitFailed,o=e.error,c=e.hasSubmitErrors,u=e.hasValidationErrors,s=e.modifiedSinceLastSubmit;return a.createElement(a.Fragment,null,a.createElement(b.Z,null,"Invite a user"),a.createElement(S.Z,null,a.createElement("form",{onSubmit:n},a.createElement(g.gN,{component:Zn.gN,name:"username",validate:L.C1,label:"Username",fullWidth:!0,margin:"normal",errors:{required:"Enter a username",taken:"Username already taken",invalid:a.createElement(a.Fragment,null,"Enter a valid username"," ",a.createElement(y.ZP,{arrow:!0,title:"Must start with a letter or underscore, and contain only alphanumeric characters and underscores thereafter"},a.createElement(T.Z,{className:m.infoIcon},"info")))},autoComplete:"off"}),a.createElement(g.gN,{component:Zn.gN,name:"email",validate:L.C1,label:"Email",fullWidth:!0,margin:"normal",errors:{required:"Enter an email",taken:"Email already taken",invalid:"Enter a valid email"},autoComplete:"off"}),a.createElement(g.gN,{component:Zn.gN,name:"roleId",label:"Role",select:!0,fullWidth:!0,margin:"normal"},i.map((function(e){return a.createElement(P.Z,{value:e.id,key:e.id},e.name)}))),r&&a.createElement(Zn.Xq,{error:o,errors:{unexpected:"Something went wrong",smtp:"SMTP error: contact your administrator"}}),a.createElement("input",{type:"submit",style:{display:"none"}}))),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return t("cancel")},color:"primary",disabled:l},"Cancel"),a.createElement(R.Z,{onClick:n,color:"primary",disabled:l||u&&r||c&&!s},"Invite")))}))}function wn(e){var n=this,t=e.close,i=e.user,r=i.email,m=i.username,s=l.D$(),d=o.D$(),p=W.D$().push,k=a.useCallback((function(e){var a=e.email;return(0,c.mG)(n,void 0,void 0,(function(){var e,n;return(0,c.Jh)(this,(function(i){switch(i.label){case 0:if(a===r)return t(),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,s({endpoint:"/users/edit_email",method:"POST",body:JSON.stringify({username:m,email:a})})];case 2:return i.sent(),d.patchOk(Cn,null,gn.Z((function(e){return e.username===m?(0,c.pi)((0,c.pi)({},e),{email:a}):e}))),p("Changes saved"),t(),[3,4];case 3:return e=i.sent(),l.Bb.is(e,400,/Another user already has that email/)?[2,{email:"taken"}]:l.Bb.is(e,400,/Invalid email/)?[2,{email:"invalid"}]:(console.error("Error changing email"),console.dir(e),[2,(n={},n[u.Ck]="unexpected",n)]);case 4:return[2]}}))}))}),[t,m,r,s,d,p]);return a.createElement(g.l0,{onSubmit:k,initialValues:{email:r}},(function(e){var n=e.handleSubmit,i=e.submitting,l=e.submitFailed,r=e.error,o=e.hasSubmitErrors,c=e.hasValidationErrors,u=e.modifiedSinceLastSubmit;return a.createElement(a.Fragment,null,a.createElement(b.Z,null,'Edit user: "',m,'"'),a.createElement(S.Z,null,a.createElement("form",{onSubmit:n},a.createElement(g.gN,{component:Zn.gN,name:"email",validate:L.C1,label:"Email",fullWidth:!0,margin:"normal",errors:{required:"Enter an email",taken:"Email already taken",invalid:"Enter a valid email"},autoComplete:"off"}),l&&a.createElement(Zn.Xq,{error:r,errors:{unexpected:"Something went wrong"}}),a.createElement("input",{type:"submit",style:{display:"none"}}))),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return t("cancel")},color:"primary",disabled:i},"Cancel"),a.createElement(R.Z,{onClick:n,color:"primary",disabled:i||c&&l||o&&!u},"Save")))}))}function Tn(e){var n=e.user,t=e.close,i=l.D$(),r=o.D$(),c=W.D$().push,u=a.useCallback((function(){t(),i({endpoint:"/users/delete",method:"POST",body:JSON.stringify({username:n.username})}).then((function(){c('User "'.concat(n.username,'" deleted'))})).catch((function(e){r.patchOk(Cn,null,fn.Z(n)),c('Error deleting user "'.concat(n.username,'"')),console.error("Error deleting user"),console.dir(e)})),r.patchOk(Cn,null,En.Z(yn.Z("username",n.username)))}),[n,t,i,r,c]);return a.createElement(a.Fragment,null,a.createElement(b.Z,null,"Delete a user"),a.createElement(S.Z,null,'You are about to delete user "',n.username,'". This operation is irreversible.'),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return t("cancel")},color:"primary"},"Cancel"),a.createElement(R.Z,{onClick:u,color:"primary"},"Delete")))}function In(e){var n=e.username,t=e.admin,i=e.close,r=l.D$(),u=o.D$(),m=W.D$().push,s=a.useCallback((function(){return i(r({method:"POST",endpoint:"/users/".concat(t?"grant":"revoke","_admin"),body:JSON.stringify({username:n})}).then((function(){return u.patchOk(Cn,null,gn.Z((function(e){return e.username===n?(0,c.pi)((0,c.pi)({},e),{isAdmin:t}):e}))),"ok"})).catch((function(e){throw m("Error ".concat(t?"granting":"revoking",' admin status for "').concat(n,'"')),console.error("Error changing user admin status",{username:n,admin:t}),console.dir(e),e})))}),[t,i,n,r,u,m]);return a.createElement(a.Fragment,null,a.createElement(b.Z,null,t?"Grant":"Revoke"," admin rights"),a.createElement(S.Z,null,"You are about to ",t?"grant admin rights to":"revoke admin rights from"," ",'"',n,'".'),a.createElement(D.Z,null,a.createElement(R.Z,{onClick:function(){return i("cancel")},color:"primary"},"Cancel"),a.createElement(R.Z,{onClick:s,color:"primary"},t?"Grant":"Revoke")))}var Pn=h.Z((function(e){return{root:{alignItems:"center",display:"flex"},admin:{fontWeight:600},icon:{fontSize:"1em",marginLeft:"calc(-1em - ".concat(e.spacing(.5),"px)"),marginRight:e.spacing(.5)}}}));function xn(e){var n,t=e.className,i=e.admin,l=void 0!==i&&i,r=e.children,o=(0,c._T)(e,["className","admin","children"]),u=Pn();return a.createElement("span",(0,c.pi)({className:vn()(t,u.root)},o),l&&a.createElement(T.Z,{className:u.icon},"security"),a.createElement(Rn,{className:vn()((n={},n[u.admin]=l,n))},r))}function Mn(e){var n=e.value,t=e.onChange,i=e.children,l=a.useState(!1),r=l[0],o=l[1],c=a.useState(n),u=c[0],m=c[1];return i({change:a.useCallback((function(e){u!==e&&(r||(o(!0),m(e),Promise.resolve(t(e)).then((function(){o(!1)})).catch((function(e){throw m(u),o(!1),e}))))}),[t,r,o,u,m]),busy:r,value:u})}function Vn(){return a.createElement(x.Z,null,a.createElement(j.o8,{heading:"Users"}),a.createElement(j.Ex,null))}function Un(e){var n=this,t=e.users,i=o.Rq(t),r=E.aM({query:Fn})[0].data,u=r.roles,m=r.defaultRole,d=null==m?void 0:m.id,p=l.D$(),k=o.D$(),v=W.D$().push,g=q.D(),y=g.open,h=a.useCallback((function(e,n){return p({method:"POST",endpoint:"/users/set_role",body:JSON.stringify({username:e,role:n})}).then((function(){k.patchOk(Cn,null,gn.Z((function(t){return t.username===e?(0,c.pi)((0,c.pi)({},t),{role:n}):t})))})).catch((function(t){throw v('Error changing role for "'.concat(e,'"')),console.error("Error chaging role",{username:e,role:n}),console.dir(t),t}))}),[p,k,v]),b=a.useCallback((function(e,n){return p({method:"POST",endpoint:"/users/".concat(n?"enable":"disable"),body:JSON.stringify({username:e})}).then((function(){k.patchOk(Cn,null,gn.Z((function(t){return t.username===e?(0,c.pi)((0,c.pi)({},t),{isActive:n}):t})))})).catch((function(t){throw v("Error ".concat(n?"enabling":"disabling",' "').concat(e,'"')),console.error("Error (de)activating user",{username:e,active:n}),console.dir(t),t}))}),[p,k,v]),N=a.useMemo((function(){return[{id:"isActive",label:"Enabled",getValue:s.Z("isActive"),getDisplay:function(e,n){return a.createElement(Mn,{value:e,onChange:function(e){return b(n.username,e)}},(function(e){var n=e.change,t=e.busy,i=e.value;return a.createElement(hn.Z,{checked:i,onChange:function(e){return n(e.target.checked)},disabled:t,color:"default"})}))}},{id:"username",label:"Username",getValue:s.Z("username"),getDisplay:function(e,n){return a.createElement(xn,{admin:n.isAdmin},e)},props:{component:"th",scope:"row"}},{id:"email",label:"Email",getValue:s.Z("email")},{id:"role",label:"Role",getValue:function(e){return e.roleId&&(u.find((function(n){return n.id===e.roleId}))||{}).name},getDisplay:function(e,n){return a.createElement(Mn,{value:e,onChange:function(e){return h(n.username,e)}},(function(e){var n=e.change,t=e.busy,i=e.value;return a.createElement(bn.Z,{value:i||"<None>",onChange:function(e){return n(e.target.value)},disabled:t,renderValue:f.Z},u.map((function(e){return a.createElement(P.Z,{value:e.name,key:e.id},e.name)})))}))}},{id:"dateJoined",label:"Date joined",getValue:s.Z("dateJoined"),getDisplay:function(e){return a.createElement("span",{title:e.toString()},a.createElement(Sn.Ig,{value:e}))}},{id:"lastLogin",label:"Last login",getValue:s.Z("lastLogin"),getDisplay:function(e){return a.createElement("span",{title:e.toString()},a.createElement(Sn.Ig,{value:e}))}},{id:"isAdmin",label:"Admin",hint:"Admins can see this page, add/remove users, and make/remove admins",getValue:s.Z("isAdmin"),getDisplay:function(e,t){return a.createElement(Mn,{value:e,onChange:function(e){return(0,c.mG)(n,void 0,void 0,(function(){return(0,c.Jh)(this,(function(n){switch(n.label){case 0:return[4,y((function(n){var i=n.close;return a.createElement(In,(0,c.pi)({},{close:i,admin:e,username:t.username}))}))];case 1:if("ok"!==n.sent())throw new Error("cancelled");return[2]}}))}))}},(function(e){var n=e.change,t=e.busy,i=e.value;return a.createElement(hn.Z,{checked:i,onChange:function(e){return n(e.target.checked)},disabled:t,color:"default"})}))}}]}),[u,y,b,h]),S=j.Pl({rows:i,column:N[0]}),Z=Nn.D$(S.ordered,{getItemId:s.Z("username")}),C=[{title:"Invite",icon:a.createElement(T.Z,null,"add"),fn:a.useCallback((function(){y((function(e){var n=e.close;return a.createElement(An,(0,c.pi)({},{close:n,roles:u,defaultRoleId:d}))}))}),[u,d,y])}];return a.createElement(a.Suspense,{fallback:a.createElement(Vn,null)},a.createElement(x.Z,null,g.render({maxWidth:"xs",fullWidth:!0}),a.createElement(j.o8,{heading:"Users",actions:C}),a.createElement(j.im,null,a.createElement(M.Z,{size:"small"},a.createElement(j.Fb,{columns:N,ordering:S,withInlineActions:!0}),a.createElement(V.Z,null,Z.paginated.map((function(e){return a.createElement(U.Z,{hover:!0,key:e.username},N.map((function(n){return a.createElement(O.Z,(0,c.pi)({key:n.id},n.props),(n.getDisplay||f.Z)(n.getValue(e),e))})),a.createElement(O.Z,{align:"right",padding:"none"},a.createElement(j.xS,{actions:(n=e,[{title:"Delete",icon:a.createElement(T.Z,null,"delete"),fn:function(){g.open((function(e){var t=e.close;return a.createElement(Tn,(0,c.pi)({},{user:n,close:t}))}))}},{title:"Edit",icon:a.createElement(T.Z,null,"edit"),fn:function(){g.open((function(e){var t=e.close;return a.createElement(wn,(0,c.pi)({},{user:n,close:t}))}))}}])})));var n}))))),a.createElement(j.tl,{pagination:Z})))}function On(){var e=l.D$(),n=o.et(Cn,{req:e});return a.createElement(a.Fragment,null,a.createElement(r.Z,null,["Users, Roles and Policies","Admin"]),a.createElement(i.Z,{mt:2},a.createElement(Un,{users:n})),a.createElement(i.Z,{mt:2,mb:2},a.createElement(_e,null)),a.createElement(i.Z,{mt:2,mb:2},a.createElement(pn,null)))}}}]);
//# sourceMappingURL=6399.fc148af3f0269e1cc85e.chunk.js.map