{"version":3,"file":"8129.b4f09202cdcd28dbbcbb.chunk.js","mappings":"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","sources":["webpack://quilt-navigator/./app/containers/Bucket/Summarize.tsx","webpack://quilt-navigator/./app/components/Pagination/Controls.js","webpack://quilt-navigator/./app/components/Pagination/Pagination.js"],"sourcesContent":["import type { S3 } from 'aws-sdk'\nimport cx from 'classnames'\nimport type { LocationDescriptor } from 'history'\nimport * as R from 'ramda'\nimport * as React from 'react'\nimport * as M from '@material-ui/core'\n\nimport { copyWithoutSpaces } from 'components/BreadCrumbs'\nimport Markdown from 'components/Markdown'\nimport * as Preview from 'components/Preview'\nimport Skeleton, { SkeletonProps } from 'components/Skeleton'\nimport { docs } from 'constants/urls'\nimport * as APIConnector from 'utils/APIConnector'\nimport * as AWS from 'utils/AWS'\nimport { useData } from 'utils/Data'\nimport * as LogicalKeyResolver from 'utils/LogicalKeyResolver'\nimport * as NamedRoutes from 'utils/NamedRoutes'\nimport Link from 'utils/StyledLink'\nimport { PackageHandle } from 'utils/packageHandle'\nimport * as s3paths from 'utils/s3paths'\n\nimport * as requests from './requests'\nimport * as errors from './errors'\n\ntype SummaryFileTypeShorthand = 'echarts' | 'voila'\ntype SummaryFileTypeExtended = {\n  name: SummaryFileTypeShorthand\n  style?: { height: string }\n}\ntype SummaryFileType = SummaryFileTypeShorthand | SummaryFileTypeExtended\ntype SummaryFileTypes = SummaryFileType[]\n\ninterface S3Handle extends LogicalKeyResolver.S3SummarizeHandle {\n  error?: errors.BucketError\n}\n\ninterface SummarizeFile {\n  description?: string\n  handle: S3Handle\n  path: string\n  title?: string\n  types?: SummaryFileTypes\n  width?: string | number\n  expand?: boolean\n}\n\ntype MakeURL = (h: S3Handle) => LocationDescriptor\n\nconst useDownloadButtonStyles = M.makeStyles((t) => ({\n  root: {\n    alignItems: 'center',\n    display: 'flex',\n    height: t.spacing(4),\n    justifyContent: 'center',\n    width: t.spacing(3),\n  },\n}))\n\ninterface DownloadButtonProps {\n  className?: string\n  handle: S3Handle\n}\n\nfunction DownloadButton({ className, handle }: DownloadButtonProps) {\n  const classes = useDownloadButtonStyles()\n  return AWS.Signer.withDownloadUrl(handle, (url: string) => (\n    <div className={cx(classes.root, className)}>\n      <M.IconButton href={url} title=\"Download\" download>\n        <M.Icon>arrow_downward</M.Icon>\n      </M.IconButton>\n    </div>\n  ))\n}\n\nenum FileThemes {\n  Overview = 'overview',\n  Nested = 'nested',\n}\nconst FileThemeContext = React.createContext(FileThemes.Overview)\n\nconst useSectionStyles = M.makeStyles((t) => ({\n  root: {\n    position: 'relative',\n    [t.breakpoints.down('xs')]: {\n      borderRadius: 0,\n    },\n    [t.breakpoints.up('sm')]: {\n      marginTop: t.spacing(2),\n    },\n  },\n  [FileThemes.Overview]: {\n    [t.breakpoints.down('xs')]: {\n      padding: t.spacing(2),\n      paddingTop: t.spacing(3),\n    },\n    [t.breakpoints.up('sm')]: {\n      padding: t.spacing(4),\n    },\n  },\n  [FileThemes.Nested]: {\n    [t.breakpoints.down('xs')]: {\n      padding: t.spacing(1),\n      paddingTop: t.spacing(2),\n    },\n    [t.breakpoints.up('sm')]: {\n      padding: t.spacing(2),\n    },\n  },\n  description: {\n    ...t.typography.body2,\n  },\n  heading: {\n    ...t.typography.h6,\n    display: 'flex',\n    lineHeight: 1.75,\n    marginBottom: t.spacing(1),\n    [t.breakpoints.up('sm')]: {\n      marginBottom: t.spacing(2),\n    },\n    [t.breakpoints.up('md')]: {\n      ...t.typography.h5,\n    },\n  },\n  headingText: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  headingAction: {\n    marginLeft: 'auto',\n  },\n}))\n\ninterface SectionProps extends M.PaperProps {\n  description?: React.ReactNode\n  handle?: S3Handle\n  heading?: React.ReactNode\n}\n\nexport function Section({\n  handle,\n  heading,\n  description,\n  children,\n  ...props\n}: SectionProps) {\n  const ft = React.useContext(FileThemeContext)\n  const classes = useSectionStyles()\n  return (\n    <M.Paper className={cx(classes.root, classes[ft])} {...props}>\n      {!!heading && (\n        <div className={classes.heading}>\n          <div className={classes.headingText}>{heading}</div>\n          {handle && <DownloadButton className={classes.headingAction} handle={handle} />}\n        </div>\n      )}\n      {!!description && <div className={classes.description}>{description}</div>}\n      {children}\n    </M.Paper>\n  )\n}\n\ninterface PreviewBoxProps {\n  children: React.ReactNode\n  expanded?: boolean\n  onExpand: () => void\n}\n\nconst usePreviewBoxStyles = M.makeStyles((t) => ({\n  root: {\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    maxHeight: t.spacing(30),\n    minHeight: t.spacing(15),\n    position: 'relative',\n\n    // workarounds to speed-up notebook preview rendering:\n    '&:not($expanded)': {\n      // hide overflow only when not expanded, using this while expanded\n      // slows down the page in chrome\n      overflow: 'hidden',\n\n      // only show 2 first cells unless expanded\n      '& .ipynb-preview .cell:nth-child(n+3)': {\n        display: 'none',\n      },\n    },\n  },\n  expanded: {\n    maxHeight: 'none',\n  },\n  fade: {\n    alignItems: 'flex-end',\n    background: `linear-gradient(to top,\n      rgba(255, 255, 255, 1),\n      rgba(255, 255, 255, 0.9),\n      rgba(255, 255, 255, 0.1),\n      rgba(255, 255, 255, 0.1)\n    )`,\n    bottom: 0,\n    display: 'flex',\n    height: '100%',\n    cursor: 'pointer',\n    justifyContent: 'center',\n    left: 0,\n    position: 'absolute',\n    width: '100%',\n    zIndex: 1,\n  },\n}))\n\nfunction PreviewBox({ children, expanded, onExpand }: PreviewBoxProps) {\n  const classes = usePreviewBoxStyles()\n  return (\n    <div className={cx(classes.root, { [classes.expanded]: expanded })}>\n      {children}\n      {!expanded && (\n        <div className={classes.fade} onClick={onExpand} title=\"Click to expand\">\n          <M.Button variant=\"outlined\">Expand</M.Button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nconst CrumbLink = M.styled(Link)({ wordBreak: 'break-word' })\n\ninterface CrumbsProps {\n  handle: S3Handle\n}\n\nfunction Crumbs({ handle }: CrumbsProps) {\n  const { urls } = NamedRoutes.use()\n  const crumbs = React.useMemo(() => {\n    const all = s3paths.getBreadCrumbs(handle.key)\n    const dirs = R.init(all).map(({ label, path }) => ({\n      to: urls.bucketFile(handle.bucket, path),\n      children: label,\n    }))\n    const file = {\n      to: urls.bucketFile(handle.bucket, handle.key),\n      children: R.last(all)?.label,\n    }\n    return { dirs, file }\n  }, [handle.bucket, handle.key, urls])\n\n  return (\n    <span onCopy={copyWithoutSpaces}>\n      {crumbs.dirs.map((c) => (\n        <React.Fragment key={`crumb:${c.to}`}>\n          <CrumbLink {...c} />\n          &nbsp;/{' '}\n        </React.Fragment>\n      ))}\n      <CrumbLink {...crumbs.file} />\n    </span>\n  )\n}\n\ninterface FilePreviewProps {\n  expanded?: boolean\n  file?: SummarizeFile\n  handle: S3Handle\n  headingOverride: React.ReactNode\n  packageHandle?: PackageHandle\n}\n\nexport function FilePreview({\n  expanded: defaultExpanded,\n  file,\n  handle,\n  headingOverride,\n  packageHandle,\n}: FilePreviewProps) {\n  const description = file ? <Markdown data={file.description} /> : null\n  const heading = headingOverride != null ? headingOverride : <Crumbs handle={handle} />\n\n  const key = handle.logicalKey || handle.key\n  const props = React.useMemo(() => Preview.getRenderProps(key, file), [key, file])\n\n  const previewOptions = React.useMemo(\n    () => ({\n      ...file,\n      context: Preview.CONTEXT.LISTING,\n    }),\n    [file],\n  )\n  const previewHandle = React.useMemo(\n    () => ({ ...handle, packageHandle }),\n    [handle, packageHandle],\n  )\n\n  const [expanded, setExpanded] = React.useState(defaultExpanded)\n  const onExpand = React.useCallback(() => setExpanded(true), [setExpanded])\n  const renderContents = React.useCallback(\n    (children) => <PreviewBox {...{ children, expanded, onExpand }} />,\n    [expanded, onExpand],\n  )\n\n  // TODO: check for glacier and hide items\n  return (\n    <Section description={description} heading={heading} handle={handle}>\n      {Preview.load(\n        previewHandle,\n        Preview.display({\n          renderContents,\n          renderProgress: () => <ContentSkel />,\n          props,\n        }),\n        previewOptions,\n      )}\n    </Section>\n  )\n}\n\nfunction ContentSkel({ lines = 15, ...props }) {\n  const widths = React.useMemo(\n    () => R.times(() => 80 + Math.random() * 20, lines),\n    [lines],\n  )\n  return (\n    <M.Box {...props}>\n      {widths.map((w, i) => (\n        <Skeleton\n          // eslint-disable-next-line react/no-array-index-key\n          key={i}\n          height={16}\n          width={`${w}%`}\n          borderRadius=\"borderRadius\"\n          mt={i ? 1 : 0}\n        />\n      ))}\n    </M.Box>\n  )\n}\n\nexport const HeadingSkel = (props: SkeletonProps) => (\n  <Skeleton borderRadius=\"borderRadius\" width={200} {...props}>\n    &nbsp;\n  </Skeleton>\n)\n\nexport const FilePreviewSkel = () => (\n  <Section heading={<HeadingSkel />}>\n    <ContentSkel />\n  </Section>\n)\n\nfunction getDisplayName(handle: S3Handle): string {\n  // TODO: show crumbs for packages too\n  return s3paths.getBasename(handle.key)\n}\n\nfunction useFileUrl(handle: S3Handle, mkUrl?: MakeURL): LocationDescriptor {\n  const { urls } = NamedRoutes.use()\n  return React.useMemo(\n    () => (mkUrl ? mkUrl(handle) : urls.bucketFile(handle.bucket, handle.key)),\n    [handle, mkUrl, urls],\n  )\n}\n\ninterface TitleCustomProps {\n  handle: S3Handle\n  mkUrl?: MakeURL\n  title: React.ReactNode\n}\n\nfunction TitleCustom({ title, mkUrl, handle }: TitleCustomProps) {\n  const displayName = getDisplayName(handle)\n  const url = useFileUrl(handle, mkUrl)\n\n  return (\n    <Link title={displayName} to={url}>\n      {title}\n    </Link>\n  )\n}\n\ninterface TitleFilenameProps {\n  handle: S3Handle\n  mkUrl: MakeURL\n}\n\nfunction TitleFilename({ handle, mkUrl }: TitleFilenameProps) {\n  const displayName = getDisplayName(handle)\n  const url = useFileUrl(handle, mkUrl)\n\n  return <Link to={url}>{displayName}</Link>\n}\n\nfunction getHeadingOverride(file: SummarizeFile, mkUrl?: MakeURL) {\n  if (file.title)\n    return <TitleCustom handle={file.handle} title={file.title} mkUrl={mkUrl} />\n  if (mkUrl) return <TitleFilename handle={file.handle} mkUrl={mkUrl} />\n  return null\n}\n\ninterface EnsureAvailabilityProps {\n  s3: S3\n  handle: S3Handle\n  children: () => React.ReactNode\n}\n\nfunction EnsureAvailability({ s3, handle, children }: EnsureAvailabilityProps) {\n  return useData(requests.ensureObjectIsPresent, { s3, ...handle }).case({\n    _: () => null,\n    Ok: (h: unknown) => !!h && children(),\n  })\n}\n\ninterface FileHandleProps {\n  file: SummarizeFile\n  mkUrl?: MakeURL\n  s3: S3\n  packageHandle?: PackageHandle\n}\n\nfunction FileHandle({ file, mkUrl, packageHandle, s3 }: FileHandleProps) {\n  if (file.handle.error)\n    return (\n      <Section heading={file.handle.key}>\n        Unable to resolve path: \"{s3paths.handleToS3Url(file.handle)}\"\n      </Section>\n    )\n\n  return (\n    <EnsureAvailability s3={s3} handle={file.handle}>\n      {() => (\n        <FilePreview\n          handle={file.handle}\n          headingOverride={getHeadingOverride(file, mkUrl)}\n          file={file}\n          expanded={file.expand}\n          packageHandle={packageHandle}\n        />\n      )}\n    </EnsureAvailability>\n  )\n}\n\nconst SUMMARY_ENTRIES = 7\n\nfunction getColumnStyles(width?: number | string) {\n  if (typeof width === 'string') return { flexBasis: width }\n  if (R.is(Number, width)) return { flexGrow: width }\n  return { flexGrow: 1 }\n}\n\ninterface ColumnProps {\n  className: string\n  file: SummarizeFile\n  mkUrl?: MakeURL\n  s3: S3\n  packageHandle?: PackageHandle\n}\n\nfunction Column({ className, file, mkUrl, packageHandle, s3 }: ColumnProps) {\n  const style = React.useMemo(() => getColumnStyles(file.width), [file.width])\n  return (\n    <div className={className} style={style}>\n      <FileHandle file={file} mkUrl={mkUrl} packageHandle={packageHandle} s3={s3} />\n    </div>\n  )\n}\n\nconst useRowStyles = M.makeStyles((t) => ({\n  row: {\n    marginLeft: t.spacing(-2),\n    [t.breakpoints.up('sm')]: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'space-between',\n    },\n  },\n  column: {\n    marginLeft: t.spacing(2),\n  },\n}))\n\ninterface RowProps {\n  file: SummarizeFile\n  mkUrl?: MakeURL\n  s3: S3\n  packageHandle?: PackageHandle\n}\n\nfunction Row({ file, mkUrl, packageHandle, s3 }: RowProps) {\n  const classes = useRowStyles()\n\n  if (!Array.isArray(file))\n    return <FileHandle file={file} s3={s3} mkUrl={mkUrl} packageHandle={packageHandle} />\n\n  return (\n    <div className={classes.row}>\n      {file.map((f) => (\n        <Column\n          className={classes.column}\n          file={f}\n          key={`${f.handle.bucket}/${f.handle.key}`}\n          mkUrl={mkUrl}\n          s3={s3}\n        />\n      ))}\n    </div>\n  )\n}\n\nconst useSummaryEntriesStyles = M.makeStyles((t) => ({\n  root: {\n    position: 'relative',\n    zIndex: 1,\n  },\n  more: {\n    display: 'flex',\n    justifyContent: 'center',\n    marginTop: t.spacing(2),\n  },\n}))\n\ninterface SummaryEntriesProps {\n  entries: SummarizeFile[]\n  mkUrl?: MakeURL\n  s3: S3\n  packageHandle?: PackageHandle\n}\n\nfunction SummaryEntries({ entries, mkUrl, packageHandle, s3 }: SummaryEntriesProps) {\n  const classes = useSummaryEntriesStyles()\n  const [shown, setShown] = React.useState(SUMMARY_ENTRIES)\n  const showMore = React.useCallback(() => {\n    setShown(R.add(SUMMARY_ENTRIES))\n  }, [setShown])\n\n  const shownEntries = R.take(shown, entries)\n  return (\n    <div className={classes.root}>\n      {shownEntries.map((file, i) => (\n        <Row\n          key={`${\n            Array.isArray(file) ? file.map((f) => f.handle.key).join('') : file.handle.key\n          }_${i}`}\n          file={file}\n          mkUrl={mkUrl}\n          packageHandle={packageHandle}\n          s3={s3}\n        />\n      ))}\n      {shown < entries.length && (\n        <div className={classes.more}>\n          <M.Button variant=\"contained\" color=\"primary\" onClick={showMore}>\n            Show more\n          </M.Button>\n        </div>\n      )}\n    </div>\n  )\n}\n\ninterface SummaryRootProps {\n  s3: S3\n  bucket: string\n  inStack: boolean\n  overviewUrl: string\n}\n\nexport function SummaryRoot({ s3, bucket, inStack, overviewUrl }: SummaryRootProps) {\n  const req = APIConnector.use()\n  const data = useData(requests.bucketSummary, { req, s3, bucket, inStack, overviewUrl })\n  return (\n    <FileThemeContext.Provider value={FileThemes.Overview}>\n      {data.case({\n        Err: (e: Error) => {\n          // eslint-disable-next-line no-console\n          console.warn('Error loading summary')\n          // eslint-disable-next-line no-console\n          console.error(e)\n          return null\n        },\n        Ok: (entries: SummarizeFile[]) => <SummaryEntries entries={entries} s3={s3} />,\n        Pending: () => <FilePreviewSkel />,\n        _: () => null,\n      })}\n    </FileThemeContext.Provider>\n  )\n}\n\ninterface SummaryFailedProps {\n  error: Error\n}\n\nconst useSummaryFailedStyles = M.makeStyles((t) => ({\n  heading: {\n    color: t.palette.error.light,\n    display: 'flex',\n    alignItems: 'center',\n  },\n  icon: {\n    marginRight: t.spacing(1),\n  },\n}))\n\nfunction SummaryFailed({ error }: SummaryFailedProps) {\n  const classes = useSummaryFailedStyles()\n  return (\n    <Section\n      heading={\n        <span className={classes.heading} title={error.message}>\n          <M.Icon className={classes.icon}>error</M.Icon>Oops\n        </span>\n      }\n    >\n      <M.Typography>Check your quilt_summarize.json file for errors.</M.Typography>\n      <M.Typography>\n        See the{' '}\n        <Link href={`${docs}/catalog/visualizationdashboards#quilt_summarize.json`}>\n          summarize docs\n        </Link>{' '}\n        for more.\n      </M.Typography>\n    </Section>\n  )\n}\n\ninterface SummaryNestedProps {\n  mkUrl: MakeURL\n  handle: {\n    key: string\n    logicalKey: string\n    bucket: string\n    version: string\n    etag: string\n  }\n  packageHandle: PackageHandle\n}\n\nexport function SummaryNested({ handle, mkUrl, packageHandle }: SummaryNestedProps) {\n  const s3 = AWS.S3.use()\n  const resolveLogicalKey = LogicalKeyResolver.use()\n  const data = useData(requests.summarize, { s3, handle, resolveLogicalKey })\n  return (\n    <FileThemeContext.Provider value={FileThemes.Nested}>\n      {data.case({\n        Err: (e: Error) => <SummaryFailed error={e} />,\n        Ok: (entries: SummarizeFile[]) => (\n          <SummaryEntries\n            entries={entries}\n            s3={s3}\n            mkUrl={mkUrl}\n            packageHandle={packageHandle}\n          />\n        ),\n        Pending: () => <FilePreviewSkel />,\n        _: () => null,\n      })}\n    </FileThemeContext.Provider>\n  )\n}\n","import * as React from 'react'\nimport * as M from '@material-ui/core'\n\nconst useStyles = M.makeStyles((t) => ({\n  root: {\n    padding: t.spacing(0.5),\n  },\n}))\n\n// direction: left | right\nfunction Chevron({ direction, ...rest }) {\n  const classes = useStyles()\n  return (\n    <M.IconButton className={classes.root} {...rest}>\n      <M.Icon>{`chevron_${direction}`}</M.Icon>\n    </M.IconButton>\n  )\n}\n\nexport default function Controls({ page, pages, nextPage, prevPage }) {\n  return pages <= 1 ? null : (\n    <M.Box display=\"flex\" alignItems=\"center\">\n      <Chevron direction=\"left\" onClick={prevPage} disabled={page <= 1} />\n      <Chevron direction=\"right\" onClick={nextPage} disabled={page >= pages} />\n      <M.Box ml={1.5}>\n        {page} of {pages}\n      </M.Box>\n    </M.Box>\n  )\n}\n","import * as R from 'ramda'\nimport * as React from 'react'\n\nimport usePrevious from 'utils/usePrevious'\n\nconst PER_PAGE = 10\n\nconst useGetter = (value, get) =>\n  React.useMemo(() => (value == null ? value : get(value)), [value, get])\n\nfunction useHasChanged(value, getKey = R.identity) {\n  const key = useGetter(value, getKey)\n  const oldValue = usePrevious(value)\n  const oldKey = useGetter(oldValue, getKey)\n  if (R.is(Array, key) && R.is(Array, oldKey)) {\n    // if new list == old list + more items (appended), consider it unchanged\n    // to avoid resetting pagination on adding more items to the paginated set\n    return !R.startsWith(oldKey, key)\n  }\n  return !R.equals(key, oldKey)\n}\n\nexport const usePagination = (\n  items,\n  { getItemId = R.identity, perPage: initialPerPage = PER_PAGE, onChange } = {},\n) => {\n  const [page, setPage] = React.useState(1)\n  const [perPage, setPerPage] = React.useState(initialPerPage)\n\n  const pages = Math.max(1, Math.ceil(items.length / perPage))\n\n  const goToPage = React.useMemo(\n    () => R.pipe(R.clamp(1, pages), setPage),\n    [pages, setPage],\n  )\n\n  const nextPage = React.useCallback(() => goToPage(page + 1), [goToPage, page])\n\n  const prevPage = React.useCallback(() => goToPage(page - 1), [goToPage, page])\n\n  const getKey = useGetter(getItemId, R.map)\n  if (useHasChanged(items, getKey) && page !== 1) {\n    // reset to page 1 if items change (but not if appended)\n    goToPage(1)\n  }\n\n  const offset = (page - 1) * perPage\n\n  const paginate = React.useMemo(\n    () => R.slice(offset, offset + perPage),\n    [offset, perPage],\n  )\n  const paginated = useGetter(items, paginate)\n\n  usePrevious(perPage, (prev) => {\n    if (prev && perPage !== prev) {\n      goToPage(Math.floor(((page - 1) * prev) / perPage) + 1)\n    }\n  })\n\n  usePrevious(page, (prev) => {\n    if (page !== prev && onChange) onChange(prev, page)\n  })\n\n  return {\n    paginated,\n    total: items.length,\n    from: offset + 1,\n    to: offset + perPage,\n    perPage,\n    setPerPage,\n    page,\n    pages,\n    nextPage,\n    prevPage,\n    goToPage,\n  }\n}\n\nexport const use = usePagination\n\n// children: ReactNode[], items: any[]\nexport function Pagination({ children, items, ...props }) {\n  return children(use(items, props))\n}\n"],"names":["FileThemes","useDownloadButtonStyles","t","root","alignItems","display","height","spacing","justifyContent","width","DownloadButton","className","handle","classes","url","href","title","download","FileThemeContext","Overview","useSectionStyles","position","breakpoints","down","borderRadius","up","marginTop","padding","paddingTop","Nested","description","typography","body2","heading","h6","lineHeight","marginBottom","h5","headingText","overflow","textOverflow","headingAction","marginLeft","Section","children","props","ft","usePreviewBoxStyles","marginRight","maxHeight","minHeight","expanded","fade","background","bottom","cursor","left","zIndex","PreviewBox","onExpand","onClick","variant","CrumbLink","wordBreak","Crumbs","urls","crumbs","all","key","dirs","map","label","path","to","bucketFile","bucket","file","onCopy","c","FilePreview","defaultExpanded","headingOverride","packageHandle","data","logicalKey","previewOptions","context","previewHandle","setExpanded","renderContents","renderProgress","ContentSkel","lines","widths","Math","random","w","i","mt","HeadingSkel","FilePreviewSkel","getDisplayName","useFileUrl","mkUrl","TitleCustom","displayName","TitleFilename","getHeadingOverride","EnsureAvailability","s3","case","_","Ok","h","FileHandle","error","expand","Column","style","flexBasis","Number","flexGrow","useRowStyles","row","flexWrap","column","Row","Array","isArray","f","useSummaryEntriesStyles","more","SummaryEntries","entries","shown","setShown","showMore","shownEntries","join","length","color","SummaryRoot","inStack","overviewUrl","req","Provider","value","Err","e","console","warn","Pending","useSummaryFailedStyles","palette","light","icon","SummaryFailed","message","SummaryNested","resolveLogicalKey","useStyles","Chevron","direction","rest","Controls","page","pages","nextPage","prevPage","disabled","ml","useGetter","get","use","items","getItemId","perPage","initialPerPage","onChange","setPage","setPerPage","max","ceil","goToPage","getKey","oldValue","usePrevious","oldKey","useHasChanged","offset","paginate","paginated","prev","floor","total","from"],"sourceRoot":""}