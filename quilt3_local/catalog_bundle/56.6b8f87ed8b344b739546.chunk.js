"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[56],{30056:(e,r,t)=>{t.r(r),t.d(r,{default:()=>K});var n=t(67294),l=t(22318),a=t(16006),o=t(50997),i=t(10327),c=t(70397),m=t(70655),u=t(3735),s=t(67822),d=t(15288),p=t(97716),b=t(66688),h=t(17812),f=t(92863),E=t(39803),v=t(41120),g=t(10529),k=t(52663),Z=t(66083),w=t(29525),C=t(66856),_=t(282),x=t(41810),T=t(64436),P=t(30553),S=t(13258),z=v.Z({root:{marginBottom:-9,marginTop:-9}});function y(e){var r=e.FormControlLabelProps,t=void 0===r?{}:r,l=e.FormControlProps,a=void 0===l?{}:l,o=(e.errors,e.input),i=void 0===o?{}:o,c=e.label,u=void 0===c?void 0:c,s=e.meta,d=(0,m._T)(e,["FormControlLabelProps","FormControlProps","errors","input","label","meta"]),p=z();return n.createElement(T.Z,(0,m.pi)({},a),n.createElement(P.Z,(0,m.pi)({},t,{control:n.createElement(S.Z,(0,m.pi)({classes:p,disabled:s.submitting||s.submitSucceeded},i,d)),label:u})))}var F=t(95477),I=v.Z({root:{overflow:"hidden"}});function W(e){var r=e.InputLabelProps,t=e.error,l=e.helperText,a=e.input,o=e.validating,i=(0,m._T)(e,["InputLabelProps","error","helperText","input","validating"]),c=I(),u=(0,m.pi)((0,m.pi)({InputLabelProps:(0,m.pi)({shrink:!0},r),InputProps:{endAdornment:o&&n.createElement(F.Z,{size:20}),classes:c},error:!!t,helperText:t||l},a),i);return n.createElement(E.Z,(0,m.pi)({},u))}var N=t(25476),q=t(69534),L=t(67869),A=t(31708);function j(e){var r=e.bucket,t=e.input,l=e.meta,a=e.errors,o=e.helperText,i=e.InputLabelProps,c=(0,m._T)(e,["bucket","input","meta","errors","helperText","InputLabelProps"]),u=q.D$().urls,s=n.useMemo((function(){return t.value?u.bucketFile(r,".quilt/workflows/".concat(t.value,".json"),{edit:!0}):null}),[u,r,t.value]),d=l.submitFailed&&(l.error||l.submitError),p=(0,m.pi)((0,m.pi)({error:!!d,helperText:d?a[d]||d:o,disabled:l.submitting||l.submitSucceeded,InputLabelProps:(0,m.pi)({shrink:!0},i),InputProps:{endAdornment:s&&n.createElement("a",{href:s,target:"_blank"},n.createElement(h.Z,{size:"small"},n.createElement(f.Z,null,"open_in_new")))}},t),c);return n.createElement(E.Z,(0,m.pi)({},p))}function $(){}var D=v.Z({root:{padding:0}});function G(e){var r=e.onClick,t=D();return n.createElement(h.Z,{className:t.root,onClick:r,size:"small"},n.createElement(f.Z,null,"add_circle_outline"))}function J(e){var r=e.error;return n.createElement(g.Z,{flexGrow:1,display:"flex",alignItems:"center",pl:2},n.createElement(f.Z,{color:"error"},"error_outline"),n.createElement(g.Z,{pl:1}),n.createElement(l.Z,{variant:"body2",color:"error"},r))}var M={margin:"normal",size:"small"},O={};function R(e){var r=e.bucket,t=e.open,l=e.onClose,a=e.onSubmit;return n.createElement(k.Z,{onClose:l,open:t,fullWidth:!0,maxWidth:"sm"},n.createElement(b.l0,{onSubmit:a},(function(e){var t=e.handleSubmit,a=e.submitting,o=e.submitFailed,i=e.submitError,c=e.error,m=e.hasValidationErrors;return n.createElement(n.Fragment,null,n.createElement(Z.Z,null,"Add workflow"),n.createElement(w.Z,null,n.createElement(b.gN,{component:W,errors:{required:"Enter workflow name"},disabled:a,fullWidth:!0,helperText:n.createElement(x.Z,null,"name"),label:"Workflow name",margin:"normal",name:"name",placeholder:"e.g. Workflow A",size:"small",validate:A.C1}),n.createElement(b.gN,{component:W,disabled:a,errors:O,fullWidth:!0,helperText:n.createElement(x.Z,null,"description"),label:"Workflow description",margin:"normal",name:"description",placeholder:"e.g. Highly useful workflow",size:"small"}),n.createElement(b.gN,{component:W,disabled:a,errors:O,fullWidth:!0,helperText:n.createElement(x.Z,null,"package_handle"),label:"Regular expression to validate package handle",margin:"normal",name:"handle_pattern",placeholder:"e.g. ^foo/bar$",size:"small"}),n.createElement(b.gN,{bucket:r,component:j,disabled:a,errors:O,fullWidth:!0,helperText:n.createElement(x.Z,null,"metadata_schema"),label:"Metadata JSON Schema name",margin:"normal",name:"metadata_schema",placeholder:"e.g. mySchema1",size:"small",validate:$}),n.createElement(b.gN,{bucket:r,component:j,disabled:a,errors:O,fullWidth:!0,helperText:n.createElement(x.Z,null,"entries_schema"),label:"Entries JSON Schema name",margin:"normal",name:"entries_schema",placeholder:"e.g. mySchema1",size:"small",validate:$}),n.createElement(b.gN,{FormControlProps:M,component:y,label:"Is message required",name:"is_message_required",type:"checkbox"})),n.createElement(C.Z,null,(!!c||!!i)&&n.createElement(J,{error:c||i}),n.createElement(_.Z,{onClick:l,disabled:a},"Cancel"),n.createElement(_.Z,{type:"submit",onClick:t,variant:"contained",color:"primary",disabled:a||o&&m},"Save")))})))}function B(e){var r=e.bucket,t=e.onChange,l=n.useState(!1),a=l[0],o=l[1],i=n.useCallback((function(e){t(e),o(!1)}),[t]);return n.createElement(n.Fragment,null,n.createElement(G,{onClick:function(){return o(!0)}}),n.createElement(R,{bucket:r,open:a,onClose:function(){return o(!1)},onSubmit:i}))}function H(e,r){return s.Z(["schemas",r],{url:"s3://".concat(e,"/.quilt/workflows/").concat(encodeURIComponent(r),".json")})}var U={Toolbar:function(e){var r,t=e.columnPath,l=e.onChange,a=q.D$().paths,o=(0,L.yj)(a.bucketFile,{exact:!0}).match,i=null===(r=null==o?void 0:o.params)||void 0===r?void 0:r.bucket,c=n.useCallback((function(e){i&&l((function(r){return u.zG(r,function(e,r){var t=r.metadata_schema;return d.Z((function(){return!!t}),H(e,t),p.Z)}(i,e),function(e,r){var t=r.entries_schema;return d.Z((function(){return!!t}),H(e,t),p.Z)}(i,e),function(e){return s.Z(["workflows",(r=e.name,r.replace(/ /g,"_").replace(/[^A-Za-z0-9-_]/g,""))],e);var r}(e))}))}),[i,l]);return i&&"/workflows"===N.P(t)?n.createElement(B,{bucket:i,onChange:c}):null}};function V(){return n.createElement(l.Z,{variant:"body2"},"Configuration for data quality workflows. See"," ",n.createElement(c.Z,{href:"".concat(i.rx,"/advanced/workflows"),target:"_blank"},"the docs"))}function K(e){var r=e.children;return n.createElement(o.zt,{value:U},r({header:n.createElement(V,null),schema:a}))}}}]);
//# sourceMappingURL=56.6b8f87ed8b344b739546.chunk.js.map