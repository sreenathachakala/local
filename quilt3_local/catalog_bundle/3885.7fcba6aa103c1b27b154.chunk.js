"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[3885],{13885:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var a=n(70655),l=n(26470),r=n(66518),c=n.n(r),i=n(919),u=n(36962),o=n(82539),s=n(30601),m=n(67294),p=n(16550),d=n(41120),f=n(82285),k=n(282),b=n(10529),h=n(95477),v=n(78869),g=n(22534),y=n(12596),E=n(43987),x=n(85693),Z=n(32248),C=n(84268),w=n(57156),D=n(69534),S=n(13950),N=n(82268),q=n(36473),F=n(15592),M=n(37600),P=n(25170),$=n(54208),z=n(87832),B=n(35992),I=n(29039),L=n(73206),_=n(42059);function O(e){var t=e.bucket,n=e.path,a=e.className,l=g.rx(t,n),r=m.useMemo((function(){return[{onClick:l.open,title:"Create file"}]}),[l.open]);return m.createElement(m.Fragment,null,l.render(),m.createElement($.Z,{className:a,items:r}))}var T=d.Z((function(e){return{root:{alignItems:"baseline",display:"flex",marginLeft:e.spacing(2)},button:{fontSize:11,lineHeight:"22px",margin:e.spacing(0,1)}}}));function j(e){var t=e.bucket,n=e.items,r=e.onClearSelection,c=e.path,i=e.selection,u=T(),o=y.D$(),s=m.useMemo((function(){var e=[];return(null==i?void 0:i.includes(".."))&&e.push({bucket:t,key:q.P8((0,l.join)(c,".."))}),n.some((function(t){var n=t.name,l=t.handle,r=t.type;return!(null==i?void 0:i.length)||((null==i?void 0:i.includes(n))&&l&&e.push((0,a.pi)((0,a.pi)({},l),{key:"dir"===r?q.P8(l.key):l.key})),e.length===(null==i?void 0:i.length))})),e}),[t,c,n,i]),p=m.useCallback((function(){null==o||o.append("main",s),r()}),[o,s,r]);return m.createElement(f.Z,{direction:"down",in:!!(null==i?void 0:i.length)},m.createElement("div",{className:u.root},m.createElement(k.Z,{className:u.button,color:"primary",size:"small",variant:"outlined",onClick:p},"Add selected items to bookmarks")))}var H=i.Z(u.Z(v.$2.Sep(m.createElement(m.Fragment,null,"Â / "))),(function(e){var t=e.bucket,n=e.path,l=e.urls;return(0,a.ev)([{label:t,path:""}],q.tO(n),!0).map((function(e){var a=e.label,r=e.path;return v.$2.Segment({label:a,to:r===n?void 0:l.bucketDir(t,r)})}))}));function R(e){var t=e.response,n=e.locked,l=e.bucket,r=e.path,c=e.loadMore,i=p.k6(),u=D.D$().urls,d=m.useCallback((function(e){i.push(u.bucketDir(l,r,e))}),[i,u,l,r]),f=function(e){var t=D.D$().urls;return m.useMemo((function(){var n=e.dirs.map((function(n){return{type:"dir",name:q.ge(q.ro(e.path,n)),to:t.bucketDir(e.bucket,n),handle:{bucket:e.bucket,key:n}}})),l=e.files.map((function(n){var a=n.key,l=n.size,r=n.modified,c=n.archived;return{type:"file",name:q.ro(e.path,a),to:t.bucketFile(e.bucket,a),size:l,modified:r,archived:c,handle:{bucket:e.bucket,key:a}}})),r=(0,a.ev)((0,a.ev)((0,a.ev)([],""===e.path||e.prefix?[]:[{type:"dir",name:"..",to:t.bucketDir(e.bucket,q.up(e.path))}],!0),n,!0),l,!0);return o.Z(s.Z("name"),r)}),[e,t])}(t),k=m.useState([]),b=k[0],h=k[1],v=m.useCallback((function(e){return h(e)}),[]);return m.useEffect((function(){return h([])}),[l,r]),m.createElement(m.Fragment,null,m.createElement(P.NB,{items:f,locked:n,loadMore:c,truncated:t.truncated,prefixFilter:t.prefix,onSelectionChange:v,selection:b,toolbarContents:m.createElement(m.Fragment,null,m.createElement(P.I4,{key:"".concat(t.bucket,"/").concat(t.path),prefix:t.prefix,setPrefix:d}),m.createElement(j,{bucket:l,items:f,onClearSelection:function(){return h([])},path:r,selection:b}))}),m.createElement(I.Z,{files:t.files,mkUrl:null,path:r}))}var W,Y,A=d.Z((function(e){return{crumbs:(0,a.pi)((0,a.pi)({},e.typography.body1),{maxWidth:"100%",overflowWrap:"break-word"}),button:{flexShrink:0,marginBottom:"-3px",marginLeft:e.spacing(1),marginTop:"-3px"}}}));function G(e){var t,n,r,i,u=e.match.params,o=u.bucket,s=u.path,p=void 0===s?"":s,d=e.location,f=A(),k=D.D$().urls,g=Z.D$(),y=g.desktop,P=g.noDownload,$=x.S3.use(),I=S.D$().preferences,T=(0,N.Z)(d.search).prefix,j=q.Jx(p),G=j?(0,l.basename)(j):o,J=m.useMemo((function(){return[{label:"Python",hl:"python",contents:c()(W||(W=(0,a.cy)(['\n          import quilt3 as q3\n          b = q3.Bucket("s3://','")\n          # list files\n          b.ls("','")\n          # download\n          b.fetch("','", "./','")\n        '],['\n          import quilt3 as q3\n          b = q3.Bucket("s3://','")\n          # list files\n          b.ls("','")\n          # download\n          b.fetch("','", "./','")\n        '])),o,j,j,G)},{label:"CLI",hl:"bash",contents:c()(Y||(Y=(0,a.cy)(['\n          # list files\n          aws s3 ls "s3://',"/",'"\n          # download\n          aws s3 cp --recursive "s3://',"/",'" "./','"\n        '],['\n          # list files\n          aws s3 ls "s3://',"/",'"\n          # download\n          aws s3 cp --recursive "s3://',"/",'" "./','"\n        '])),o,j,o,j,G)}]}),[o,j,G]),U=m.useState(null),K=U[0],Q=U[1];m.useLayoutEffect((function(){Q(null)}),[j,T]);var V=(0,C.et)(_.rx,{s3:$,bucket:o,path:j,prefix:T,prev:K}),X=m.useCallback((function(){E.Z.case({Ok:function(e){e.continuationToken&&Q(e)},_:function(){}},V.result)}),[V.result]),ee=z.eh({bucket:o,delayHashing:!0,disableStateDisplay:!0}),te=m.useCallback((function(e){ee.open({path:j,successor:e})}),[ee,j]);return m.createElement(b.Z,{pt:2,pb:4},m.createElement(w.Z,null,[j||"Files",o]),ee.render({successTitle:"Package created",successRenderMessage:function(e){var t=e.packageLink;return m.createElement(m.Fragment,null,"Package ",t," successfully created")},title:"Create package from directory"}),m.createElement(b.Z,{display:"flex",alignItems:"flex-start",mb:2},m.createElement("div",{className:f.crumbs,onCopy:v.Yn},(0,v.sY)(H({bucket:o,path:j,urls:k}))),m.createElement(b.Z,{flexGrow:1}),(null===(n=null===(t=null==I?void 0:I.ui)||void 0===t?void 0:t.actions)||void 0===n?void 0:n.createPackage)&&m.createElement(B.z,{bucket:o,className:f.button,onChange:te},"Create package from directory"),!P&&!y&&m.createElement(M.dN,{className:f.button,suffix:"dir/".concat(o,"/").concat(j),label:"Download directory"}),m.createElement(O,{className:f.button,bucket:o,path:j})),(null===(i=null===(r=null==I?void 0:I.ui)||void 0===r?void 0:r.blocks)||void 0===i?void 0:i.code)&&m.createElement(F.Z,{gutterBottom:!0},J),V.case({Err:(0,L.Sj)(),Init:function(){return null},_:function(e){var t=E.Z.getPrevResult(e);return t?m.createElement(R,{response:t,locked:!E.Z.Ok.is(e),bucket:o,path:j,loadMore:X}):m.createElement(h.Z,null)}}))}}}]);
//# sourceMappingURL=3885.7fcba6aa103c1b27b154.chunk.js.map