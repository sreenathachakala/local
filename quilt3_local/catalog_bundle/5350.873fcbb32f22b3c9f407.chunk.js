"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[5350],{25350:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var a=n(70655),r=n(67294),c=n(73727),o=n(16550),l=n(282),i=n(41120),u=n(14741),s=n(92863),d=n(22318),p=n(38396),m=n(85639),g=n(95757),f=n(8920),b=n(63457),k=n(17812),h=n(10529),E=n(79895),v=n(96830),Z=n(37894),y=n(84268),C=n(57156),x=n(69534),S=n(82268),q=n(79995),w=n(27374);function R(e){var t=e.bucket,n=x.D$().urls;return r.createElement(l.Z,{component:c.Link,to:n.bucketRoot(t),variant:"outlined"},"Browse the bucket")}function I(e){var t=e.data,n=e.bucket,c=e.query,o=e.page,l=e.scrollRef,i=e.makePageUrl,u=e.retryUrl;return t.case({_:function(){return r.createElement(v.Ex,null,"Searching s3://",n,' for "',c,'"')},Err:v.LW(u),Ok:function(e){var t=e.total,c=e.hits;return t?r.createElement(v.mD,(0,a.pi)({},{hits:c,page:o,scrollRef:l,makePageUrl:i},{showBucket:!0})):r.createElement(v.ZI,null,r.createElement("br",null),r.createElement(R,{bucket:n}))}})}var N=i.Z((function(e){var t;return{searchIcon:{left:8,pointerEvents:"none",position:"absolute"},input:(t={paddingLeft:e.spacing(5),paddingRight:e.spacing(1),paddingBottom:11,paddingTop:10},t[e.breakpoints.down("xs")]={paddingBottom:15,paddingTop:14},t)}}));function _(e){var t=e.query,n=e.bucket,a=e.onChange,c=N(),o=(0,w.Z)(t,a),l=o.change,i=o.commit,d=r.useCallback((function(e){l(e.target.value)}),[l]),p=r.useCallback((function(e){switch(e.key){case"Enter":e.preventDefault(),i(),e.target.blur();break;case"Escape":e.target.blur()}}),[i]);return r.createElement(u.Z,{value:o.value,onFocus:o.edit,onBlur:o.cancel,onChange:d,onKeyDown:p,placeholder:"Search s3://".concat(n),classes:{input:c.input},fullWidth:!0,startAdornment:r.createElement(s.Z,{className:c.searchIcon},"search")})}function j(e){return e.data.case({_:function(){return""},Ok:function(e){var t=e.total;return r.createElement(d.Z,{variant:"body1",component:"span"},t," results")}})}var D=function(e){return"packages"===e?"packages":"objects"===e?"objects":"objects & packages"},F=i.Z((function(e){return{btn:(0,a.pi)((0,a.pi)({MozAppearance:"none",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,userSelect:"none"},e.typography.body1),{cursor:"pointer"})}}));function L(e){var t=e.mode,n=e.onChange,a=F(),c=[void 0,"objects","packages"],o=r.useState(!1),l=o[0],i=o[1],u=r.useCallback((function(){return i(!0)}),[i]),d=r.useCallback((function(){return i(!1)}),[i]),f=r.useRef(null);return r.createElement(r.Fragment,null,r.createElement("button",{type:"button",onClick:u,className:a.btn,ref:f},D(t),r.createElement(s.Z,{fontSize:"inherit"},"expand_more")),r.createElement(p.Z,{anchorEl:f.current,open:l,onClose:d,MenuListProps:{dense:!0}},c.map((function(e){return r.createElement(m.Z,{key:e||"all",onClick:(a=e,function(){n(a),d()}),selected:t===e},r.createElement(g.Z,{primary:D(e)}));var a}))))}var A=i.Z((function(e){return{overlay:{background:e.palette.common.white,bottom:0,display:"flex",justifyContent:"space-between",left:44,paddingRight:4,position:"absolute",right:0,top:0},controls:{lineHeight:"48px"}}}));function B(e){var t=e.mode,n=e.onChange,a=A(),c=f.Z(),o=b.Z(c.breakpoints.down("xs")),l=r.useState(!1),i=l[0],u=l[1],p=r.useCallback((function(){return u(!0)}),[u]),m=r.useCallback((function(){return u(!1)}),[u]),g=r.createElement(r.Fragment,null,!o&&r.createElement(d.Z,{component:"span"},"Searching "),r.createElement(L,{mode:t,onChange:n}));return o?r.createElement(r.Fragment,null,r.createElement(k.Z,{onClick:p},r.createElement(s.Z,null,"menu")),i&&r.createElement("div",{className:a.overlay},r.createElement("div",{className:a.controls},g),r.createElement(k.Z,{onClick:m},r.createElement(s.Z,null,"done")))):g}var T=i.Z((function(e){var t,n;return{paper:(t={paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1),lineHeight:"40px"},t[e.breakpoints.down("xs")]={borderRadius:0,boxShadow:"none","&:first-child":{paddingLeft:e.spacing(.5)},"&:last-child":{paddingRight:e.spacing(.5)}},t),stats:(n={flexGrow:1,lineHeight:"40px",padding:e.spacing(0,3),textAlign:"right"},n[e.breakpoints.down("xs")]={display:"none"},n)}}));function U(e){var t=e.bucket,n=e.query,c=e.page,l=e.mode,i=e.retry,u=x.D$().urls,s=(0,o.k6)(),p=T(),m=r.useRef(null),g=r.useCallback((function(e){s.push(u.bucketSearch(t,{q:e,mode:l}))}),[s,u,t,l]),f=r.useCallback((function(e){s.push(u.bucketSearch(t,{q:n,mode:e}))}),[s,u,t,n]),b=r.useCallback((function(e){return u.bucketSearch(t,{q:n,p:1!==e?e:void 0,mode:l,retry:i})}),[u,t,n,l,i]),k=u.bucketSearch(t,{q:n,mode:l,retry:(i||0)+1}),Z=y.D$((0,q.Z)(),{buckets:[t],mode:l,query:n,retry:i},{noAutoFetch:!n});return r.createElement(r.Fragment,null,r.createElement(h.Z,{display:"flex",position:"relative",mt:{xs:0,sm:3},ref:m},r.createElement(h.Z,{component:E.Z,className:p.paper,flexGrow:{xs:1,sm:0},position:"relative"},r.createElement(_,{query:n||"",bucket:t,onChange:g})),r.createElement("div",{className:p.stats},!!n&&r.createElement(j,{data:Z})),r.createElement(h.Z,{component:E.Z,className:p.paper},r.createElement(B,{mode:l,onChange:f}))),n?r.createElement(I,(0,a.pi)({},{data:Z,bucket:t,query:n,page:c,scrollRef:m,makePageUrl:b,retryUrl:k})):r.createElement(v.Rr,null,r.createElement(d.Z,{variant:"body1"},"Search for anything")))}function H(e){var t=e.match.params.bucket,n=e.location,c=Z.TM(),o=(0,S.Z)(n.search),l=o.q,i=void 0===l?"":l,u=o.p,s=o.mode,p=(0,a._T)(o,["q","p","mode"]),m=u&&parseInt(u,10),g=p.retry&&parseInt(p.retry,10)||void 0;return r.createElement(h.Z,{pb:{xs:0,sm:5},mx:{xs:-2,sm:0}},r.createElement(C.Z,null,[i||"Search",t]),c(t)?r.createElement(U,(0,a.pi)({},{bucket:t,query:i,page:m,mode:s,retry:g})):r.createElement(d.Z,{variant:"body1"},"Search unavailable"))}},27374:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(13646),r=n(67294),c=n(61542),o=n(9001),l=(0,c.Z)(["Idle","Edited"]);function i(e,t){var n=r.useState(l.Idle()),c=n[0],i=n[1],u=r.useCallback((function(){i(l.Edited(e))}),[e]),s=r.useCallback((function(){i(l.Idle())}),[]),d=r.useCallback((function(e){i(l.mapCase({Edited:function(){return e}}))}),[]),p=r.useCallback((function(){l.case({Edited:function(n){a.Z(e,n)||t(n),s()},_:function(){}},c)}),[e,t,s,c]),m=l.Edited.is(c),g=r.useCallback((function(n){m&&(a.Z(e,n)||t(n),s())}),[e,t,s,m]);return{value:(0,o.Z)([c,e],(function(){return l.case({Idle:function(){return e},Edited:function(e){return e}},c)})),edited:(0,o.Z)(c,l.Edited.is),edit:u,cancel:s,change:d,commit:p,commitValue:g}}}}]);
//# sourceMappingURL=5350.873fcbb32f22b3c9f407.chunk.js.map