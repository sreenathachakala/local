"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[6302],{57156:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(70655),r=n(67294),c=n(64593);function l(e,t){return function(e,t){return t?Array.isArray(t)?(0,a.ev)((0,a.ev)([],t,!0),[e],!1):[t,e]:[e]}(e,t).join(" • ")}function o(e){var t=e.children,n=e.base,a=void 0===n?"Quilt is a versioned data hub for AWS":n;return r.createElement(c.q,null,r.createElement("title",null,l(a,t)))}},6302:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var a=n(70655),r=n(15288),c=n(18865),l=n(57858),o=n(19344),i=n(61889),u=n(57438),s=n(97716),d=n(67294),m=n(16550),p=n(41120),g=n(8920),f=n(63457),b=n(14741),h=n(92863),k=n(38396),E=n(85639),Z=n(95757),v=n(46869),C=n(13258),y=n(22318),x=n(17812),q=n(43832),w=n(10529),S=n(79895),R=n(39473),j=n(96830),I=n(37894),A=n(84268),N=n(57156),_=n(69534),F=n(82268),B=n(79995),L=n(27374);function M(e){var t=e.buckets,n=e.data,r=e.query,c=e.page,l=e.scrollRef,o=e.makePageUrl,i=e.retryUrl;return n.case({_:function(){return d.createElement(j.Ex,null,"Searching ",P(t),' for "',r,'"')},Err:j.LW(i),Ok:function(e){var t=e.total,n=e.hits;return t?d.createElement(j.mD,(0,a.pi)({},{hits:n,page:c,scrollRef:l,makePageUrl:o},{showBucket:!0})):d.createElement(j.ZI,null)}})}var P=function(e){return e.length?1===e.length?"s3://".concat(e[0]):"".concat(e.length," buckets"):"all buckets"},W=p.Z((function(e){var t;return{searchIcon:{left:8,pointerEvents:"none",position:"absolute"},input:(t={paddingLeft:e.spacing(5),paddingRight:e.spacing(1),paddingBottom:11,paddingTop:10},t[e.breakpoints.down("xs")]={paddingBottom:15,paddingTop:14},t)}}));function D(e){var t=e.query,n=e.buckets,a=e.onChange,r=W(),c=(0,L.Z)(t,a),l=c.change,o=c.commit,i=d.useCallback((function(e){l(e.target.value)}),[l]),u=d.useCallback((function(e){switch(e.key){case"Enter":e.preventDefault(),o(),e.target.blur();break;case"Escape":e.target.blur()}}),[o]),s=g.Z(),m=f.Z(s.breakpoints.down("xs"))?"Search ".concat(P(n)):"Search";return d.createElement(b.Z,{value:c.value,onFocus:c.edit,onBlur:c.cancel,onChange:i,onKeyDown:u,placeholder:m,classes:{input:r.input},fullWidth:!0,startAdornment:d.createElement(h.Z,{className:r.searchIcon},"search")})}var U=p.Z((function(e){return{btn:(0,a.pi)((0,a.pi)({MozAppearance:"none",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,userSelect:"none"},e.typography.body1),{cursor:"pointer"})}}));function H(e){var t=e.buckets,n=e.onChange,a=e.short,m=void 0!==a&&a,p=U(),g=(0,L.Z)(t,n),f=g.commitValue,b=I.Zh(),y=d.useRef(null),x=d.useCallback((function(){f([])}),[f]);return d.createElement(d.Fragment,null,d.createElement("button",{type:"button",onClick:g.edit,className:p.btn,ref:y},d.createElement("span",null,m?d.createElement(d.Fragment,null,"s3://…"):P(g.value)),d.createElement(h.Z,{fontSize:"inherit"},"expand_more")),d.createElement(k.Z,{anchorEl:y.current,open:g.edited,onClose:g.commit,MenuListProps:{dense:!0}},d.createElement(E.Z,{disabled:!0},d.createElement(Z.Z,{primary:"Select buckets to search"})),d.createElement(E.Z,{selected:!g.value.length,onClick:x},d.createElement(v.Z,null,d.createElement(C.Z,{checked:!g.value.length,edge:"start"})),d.createElement(Z.Z,{primary:"All buckets"})),b.map((function(e){return d.createElement(E.Z,{key:e.name,onClick:(t=e.name,function(){g.change(r.Z(c.Z(t),l.Z([t]),o.Z(i.Z(t),u.Z(s.Z)))(g.value))}),selected:g.value.includes(e.name)},d.createElement(v.Z,null,d.createElement(C.Z,{checked:g.value.includes(e.name),edge:"start"})),d.createElement(Z.Z,{primary:e.title,secondary:"s3://".concat(e.name)}));var t}))))}function T(e){return e.data.case({_:function(){return""},Ok:function(e){var t=e.total;return d.createElement(y.Z,{variant:"body1",component:"span"},t," results")}})}var z=function(e){return"packages"===e?"packages":"objects"===e?"objects":"objects & packages"};function G(e){var t=e.mode,n=e.onChange,a=U(),r=[void 0,"objects","packages"],c=d.useState(!1),l=c[0],o=c[1],i=d.useCallback((function(){return o(!0)}),[o]),u=d.useCallback((function(){return o(!1)}),[o]),s=d.useRef(null);return d.createElement(d.Fragment,null,d.createElement("button",{type:"button",onClick:i,className:a.btn,ref:s},z(t),d.createElement(h.Z,{fontSize:"inherit"},"expand_more")),d.createElement(k.Z,{anchorEl:s.current,open:l,onClose:u,MenuListProps:{dense:!0}},r.map((function(e){return d.createElement(E.Z,{key:e||"all",onClick:(a=e,function(){n(a),u()}),selected:t===e},d.createElement(Z.Z,{primary:z(e)}));var a}))))}var O=p.Z((function(e){return{overlay:{background:e.palette.common.white,bottom:0,display:"flex",justifyContent:"space-between",left:44,paddingRight:4,position:"absolute",right:0,top:0},controls:{lineHeight:"48px"}}}));function V(e){var t=e.mode,n=e.onModeChange,a=e.buckets,r=e.onBucketsChange,c=O(),l=g.Z(),o=f.Z(l.breakpoints.down("xs")),i=d.useState(!1),u=i[0],s=i[1],m=d.useCallback((function(){return s(!0)}),[s]),p=d.useCallback((function(){return s(!1)}),[s]),b=d.createElement(d.Fragment,null,!o&&d.createElement(y.Z,{component:"span"},"Searching "),d.createElement(G,{mode:t,onChange:n}),d.createElement(y.Z,{component:"span"}," in "),d.createElement(H,{buckets:a,onChange:r,short:o}));return o?d.createElement(d.Fragment,null,d.createElement(x.Z,{onClick:m},d.createElement(h.Z,null,"menu")),u&&d.createElement("div",{className:c.overlay},d.createElement("div",{className:c.controls},b),d.createElement(x.Z,{onClick:p},d.createElement(h.Z,null,"done")))):b}var $=p.Z((function(e){var t,n;return{paper:(t={paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1),lineHeight:"40px"},t[e.breakpoints.down("xs")]={borderRadius:0,boxShadow:"none","&:first-child":{paddingLeft:e.spacing(.5)},"&:last-child":{paddingRight:e.spacing(.5)}},t),stats:(n={flexGrow:1,lineHeight:"40px",padding:e.spacing(0,3),textAlign:"right"},n[e.breakpoints.down("xs")]={display:"none"},n)}}));function K(e){var t=e.location,n=$(),r=(0,F.Z)(t.search),c=r.q,l=r.p,o=r.mode,i=(0,a._T)(r,["q","p","mode"]),u=d.useMemo((function(){return i.buckets?i.buckets.split(",").sort():[]}),[i.buckets]),s=i.retry&&parseInt(i.retry,10)||void 0,p=l&&parseInt(l,10),g=d.useRef(null),f=_.D$().urls,b=(0,m.k6)(),h=d.useCallback((function(e){b.push(f.search({q:e,buckets:u.join(",")||void 0,mode:o}))}),[b,f,u,o]),k=d.useCallback((function(e){b.push(f.search({q:c,buckets:e.join(",")||void 0,mode:o}))}),[b,f,c,o]),E=d.useCallback((function(e){b.push(f.search({q:c,buckets:u.join(",")||void 0,mode:e}))}),[b,f,u,c]),Z=f.search({q:c,mode:o,buckets:u.join(",")||void 0,retry:(s||0)+1}),v=d.useCallback((function(e){return f.search({q:c,buckets:u.join(",")||void 0,p:1!==e?e:void 0,mode:o,retry:s})}),[f,c,u,o,s]),C=A.D$((0,B.Z)(),{buckets:u,mode:o,query:c,retry:s},{noAutoFetch:!c});return d.createElement(R.ZP,{pre:d.createElement(q.Z,{maxWidth:"lg"},d.createElement(N.Z,null,c||"Search"),d.createElement(w.Z,{pb:{xs:0,sm:5},mx:{xs:-2,sm:0}},d.createElement(w.Z,{display:"flex",position:"relative",mt:{xs:0,sm:3},ref:g},d.createElement(w.Z,{component:S.Z,className:n.paper,flexGrow:{xs:1,sm:0},position:"relative"},d.createElement(D,{query:c||"",buckets:u,onChange:h})),d.createElement("div",{className:n.stats},!!c&&d.createElement(T,{data:C})),d.createElement(w.Z,{component:S.Z,className:n.paper},d.createElement(V,{mode:o,onModeChange:E,buckets:u,onBucketsChange:k}))),c?d.createElement(M,(0,a.pi)({},{data:C,query:c,buckets:u,page:p,scrollRef:g,makePageUrl:v,retryUrl:Z})):d.createElement(j.Rr,null,d.createElement(y.Z,{variant:"body1"},"Search for anything"))))})}},27374:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(13646),r=n(67294),c=n(61542),l=n(9001),o=(0,c.Z)(["Idle","Edited"]);function i(e,t){var n=r.useState(o.Idle()),c=n[0],i=n[1],u=r.useCallback((function(){i(o.Edited(e))}),[e]),s=r.useCallback((function(){i(o.Idle())}),[]),d=r.useCallback((function(e){i(o.mapCase({Edited:function(){return e}}))}),[]),m=r.useCallback((function(){o.case({Edited:function(n){a.Z(e,n)||t(n),s()},_:function(){}},c)}),[e,t,s,c]),p=o.Edited.is(c),g=r.useCallback((function(n){p&&(a.Z(e,n)||t(n),s())}),[e,t,s,p]);return{value:(0,l.Z)([c,e],(function(){return o.case({Idle:function(){return e},Edited:function(e){return e}},c)})),edited:(0,l.Z)(c,o.Edited.is),edit:u,cancel:s,change:d,commit:m,commitValue:g}}}}]);
//# sourceMappingURL=6302.b6408bd58b4915950c0b.chunk.js.map