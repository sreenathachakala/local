"use strict";(self.webpackChunkquilt_navigator=self.webpackChunkquilt_navigator||[]).push([[3898],{96830:(e,t,n)=>{n.d(t,{Rr:()=>ke,mD:()=>fe,ZI:()=>be,Ex:()=>ve,LW:()=>ye});var r=n(70655),a=n(94184),c=n.n(a),i=n(45243),o=n(53278),l=n(67826),s=n(64457),u=n(67294),d=n(73727),m=n(11476),h=n(10529),p=n(92863),g=n(17812),f=n(62087),E=n(22318),k=n(41120),v=n(8920),y=n(63457),b=n(282),Z=n(71267),x=n(73637),w=n(95477),_=n(78869),T=n(74391),B=n(34787),S=n(73179),D=n(79895),M=m.Z(D.Z)((function(e){var t,n=e.theme;return(t={position:"relative"})[n.breakpoints.down("xs")]={borderRadius:0,borderTop:"1px solid ".concat(n.palette.divider),padding:n.spacing(2)},t[n.breakpoints.up("sm")]={marginTop:n.spacing(2),padding:n.spacing(4),paddingTop:n.spacing(3)},t})),q=m.Z(h.Z)((function(e){var t,n=e.theme;return(0,r.pi)((0,r.pi)({},n.typography.h6),((t={lineHeight:1.4,marginBottom:n.spacing(1)})[n.breakpoints.up("sm")]={marginBottom:n.spacing(2)},t[n.breakpoints.up("md")]=(0,r.pi)({},n.typography.h5),t))})),R=n(85693),C=n(43987),F=n(88322),N=n(32248),W=n(84268),I=n(83962),L=n(69534),O=n(70397),z=n(36473),$=n(99643),j=n(34314),P=n(42059),H="https://www.elastic.co/guide/en/elasticsearch/reference/".concat("6.8"),G="".concat(H,"/query-dsl-query-string-query.html#query-string-syntax"),V="".concat(H,"/query-dsl-query-string-query.html#_wildcards"),U=m.Z(O.Z)({wordBreak:"break-word"});function Y(e){var t=e.handle,n=e.showBucket,a=void 0!==n&&n,c=L.D$().urls,l=t.key.endsWith("/"),s=u.useMemo((function(){var e=(0,z.tO)(t.key),n=i.Z(e).map((function(e){var n=e.label,r=e.path;return{to:c.bucketFile(t.bucket,r),children:n}})),r={to:c.bucketFile(t.bucket,t.key,{version:t.version}),children:o.Z(e).label};return{bucket:a?{to:c.bucketRoot(t.bucket),children:t.bucket}:null,dirs:n,file:r}}),[t,c,a]);return u.createElement("span",{onCopy:_.Yn},u.createElement(A,{title:l?"Directory":"File"},l?"folder_open":"insert_drive_file"),s.bucket&&u.createElement(u.Fragment,null,u.createElement(U,(0,r.pi)({},s.bucket))," /"," "),s.dirs.map((function(e){return u.createElement(u.Fragment,{key:"crumb:".concat(e.to)},u.createElement(U,(0,r.pi)({},e))," /"," ")})),u.createElement(U,(0,r.pi)({},s.file)))}function A(e){return u.createElement(h.Z,(0,r.pi)({component:p.Z,color:"text.hint",mr:1,style:{verticalAlign:"middle"}},e))}function J(e){var t=e.handle,n=e.showBucket,a=e.downloadable,c=void 0!==a&&a;return u.createElement(q,{display:"flex",alignItems:"center",mb:"0 !important"},u.createElement(Y,(0,r.pi)({},{handle:t,showBucket:n})),u.createElement(h.Z,{flexGrow:1}),!!c&&R.Ep.withDownloadUrl(t,(function(e){return u.createElement(h.Z,{alignItems:"center",display:"flex",height:32,justifyContent:"center",width:24,my:{xs:-.25,md:0}},u.createElement(g.Z,{href:e,title:"Download",download:!0},u.createElement(p.Z,null,"arrow_downward")))})))}function Q(e){var t=e.bucket,n=e.handle,r=e.hash,a=e.showBucket,c=L.D$().urls;return u.createElement(q,{mb:1},u.createElement(A,{title:"Package",component:f.Z,viewBox:"-133 0 1264 1008"},u.createElement("path",{fill:"currentColor",d:"M-2 918V446l1004 4v472c0 52-41 93-92 93H91c-52 0-93-43-93-97zM193 3h278v380H0c0-6 0-12 2-16L102 68c14-40 50-65 91-65zm709 63l100 299v2c2 4 2 8 2 12H534V1h277c41 0 77 25 91 65z"})),u.createElement("span",null,!!a&&u.createElement(u.Fragment,null,u.createElement(U,{to:c.bucketPackageList(t)},t)," /"," "),u.createElement(U,{to:c.bucketPackageTree(t,n,r)},n,u.createElement(h.Z,{component:"span",color:"text.hint"},"@"),l.Z(10,r))),u.createElement(h.Z,{flexGrow:1}))}var X=function(e){var t=e.children;return u.createElement(h.Z,{mt:2},t)},K=function(e){var t=e.children,n=(0,r._T)(e,["children"]);return u.createElement(E.Z,(0,r.pi)({variant:"h6"},n),t)},ee=function(e){var t=(0,r._T)(e,[]);return u.createElement(h.Z,(0,r.pi)({color:"text.primary",fontWeight:"fontWeightRegular",component:"span"},t))},te=m.Z("span")({whiteSpace:"nowrap"}),ne=k.Z((function(e){return{versionContainer:{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightLight},version:{fontFamily:e.typography.monospace.fontFamily,fontWeight:e.typography.fontWeightMedium},seeOther:(0,r.pi)({borderBottom:"1px dashed",cursor:"pointer"},O.R)}}));function re(e){var t=e.bucket,n=e.path,r=e.version,a=e.versions,c=ne(),i=L.D$().urls,o=u.useState(!1),l=o[0],s=o[1],d=u.useCallback((function(){s(!l)}),[s,l]),m=v.Z(),p=y.Z(m.breakpoints.down("xs")),g=function(e,t){var n="".concat(e);return p?n.substring(0,t):n};return u.createElement(h.Z,{mt:1},u.createElement(E.Z,{variant:"subtitle1",className:c.versionContainer},u.createElement(te,null,"Version"," ",u.createElement(O.Z,{to:i.bucketFile(t,n,{version:r.id}),className:c.version},g(r.id,24)))," ",u.createElement(te,null,"from ",u.createElement(ee,null,r.updated.toLocaleString())," | ",u.createElement(ee,null,(0,$.kR)(r.size)))),a.length>1&&u.createElement(E.Z,null,u.createElement("span",{className:c.seeOther,onClick:d},l?"hide ":"show "," all versions (",a.length,")")),a.length>1&&l&&u.createElement(X,null,u.createElement(K,{gutterBottom:!0},"Versions ordered by relevance"),a.map((function(e){return u.createElement(E.Z,{key:"".concat(e.updated.getTime(),":").concat(e.id),variant:"body2",className:c.versionContainer},u.createElement(O.Z,{to:i.bucketFile(t,n,{version:e.id}),className:c.version},g(e.id,6))," from ",u.createElement(ee,null,e.updated.toLocaleString())," | ",e.deleteMarker?u.createElement(ee,null,"Delete Marker"):u.createElement(ee,null,(0,$.kR)(e.size)))}))))}var ae=k.Z((function(e){return{root:{border:"1px solid ".concat(e.palette.grey[300]),borderRadius:e.shape.borderRadius,maxHeight:e.spacing(30),marginTop:e.spacing(1),minHeight:e.spacing(15),padding:e.spacing(2),position:"relative","& img":{marginLeft:"auto",marginRight:"auto"},"&:not($expanded)":{overflow:"hidden","& .ipynb-preview .cell:nth-child(n+3)":{display:"none"}}},expanded:{maxHeight:"none"},fade:{alignItems:"flex-end",background:"linear-gradient(to top,\n      rgba(255, 255, 255, 1),\n      rgba(255, 255, 255, 0.9),\n      rgba(255, 255, 255, 0.1),\n      rgba(255, 255, 255, 0.1)\n    )",bottom:0,cursor:"pointer",display:"flex",height:"100%",justifyContent:"center",left:0,padding:e.spacing(1),position:"absolute",width:"100%",zIndex:1}}}));function ce(e){var t,n=e.children,r=e.title,a=e.expanded,i=e.onExpand,o=ae();return u.createElement(X,null,r&&u.createElement(K,null,r),u.createElement("div",{className:c()(o.root,(t={},t[o.expanded]=a,t))},n,!a&&u.createElement("div",{className:o.fade,onClick:i},u.createElement(b.Z,{variant:"outlined"},"Expand"))))}var ie={context:S.IT.LISTING};function oe(e){var t,n=e.handle,a=e.bucketExistenceData,c=e.versionExistenceData,i=u.useState(!1),o=i[0],l=i[1],s=u.useCallback((function(){return l(!0)}),[l]),d=u.useCallback((function(e){return u.createElement(ce,(0,r.pi)({},{children:e,expanded:o,onExpand:s}))}),[o,s]);return t=S.jf({renderContents:d,renderProgress:ve}),a.case({_:t,Err:function(){return t(C.Z.Err(S.Mh.DoesNotExist({handle:n})))},Ok:function(){return c.case({_:t,Err:function(e){return t(C.Z.Err(S.Mh.Unexpected({handle:n,originalError:e})))},Ok:P.NB.case({Exists:function(e){return e.deleted?t(C.Z.Err(S.Mh.Deleted({handle:n}))):e.archived?t(C.Z.Err(S.Mh.Archived({handle:n}))):S.zD(n,t,ie)},DoesNotExist:function(){return t(C.Z.Err(S.Mh.InvalidVersion({handle:n})))}})})}})}function le(e){var t=e.meta,n=u.useState(!1),r=n[0],a=n[1],c=u.useCallback((function(){return a(!0)}),[a]);return!t||s.Z(t)?null:u.createElement(ce,{title:"Metadata",expanded:r,onExpand:c},u.createElement(T.Z,{defaultExpanded:1,value:t}))}var se=k.Z((function(e){return{revision:(0,r.pi)((0,r.pi)({},e.typography.subtitle1),{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightLight,marginTop:e.spacing(2)}),mono:{fontFamily:e.typography.monospace.fontFamily,fontWeight:e.typography.fontWeightMedium},msg:(0,r.pi)((0,r.pi)({},e.typography.body2),{WebkitBoxOrient:"vertical",WebkitLineClamp:2,display:"-webkit-box",marginTop:e.spacing(1),overflow:"hidden",overflowWrap:"break-word",textOverflow:"ellipsis"})}}));function ue(e){var t=e.bucket,n=e.handle,r=e.hash,a=e.comment,c=e.lastModified,i=se(),o=L.D$().urls;return u.createElement(h.Z,null,u.createElement("p",{className:i.revision},u.createElement(te,null,"Revision"," ",u.createElement(O.Z,{to:o.bucketPackageTree(t,n,r),className:i.mono,title:r},l.Z(10,r)))," ",u.createElement(te,null,"from ",u.createElement(ee,null,c.toLocaleString()))),u.createElement("p",{className:i.msg},a||u.createElement("i",null,"No message")))}function de(e){var t=e.hit,n=(0,r._T)(e,["hit"]),a=t.path.endsWith("/")?he:me;return u.createElement(a,(0,r.pi)({},(0,r.pi)({hit:t},n)))}function me(e){var t=e.showBucket,n=e.hit,a=n.path,c=n.versions,i=n.bucket,o=N.D$(),l=R.S3.use(),s=c[0],d={bucket:i,key:a,version:s.id},m=(0,F.Xc)(i),h=W.D$(P.cY,(0,r.pi)({s3:l},d)),p=!o.noDownload&&m.case({_:function(){return!1},Ok:function(){return h.case({_:function(){return!1},Ok:P.NB.case({_:function(){return!1},Exists:function(e){var t=e.deleted,n=e.archived;return!t&&!n}})})}});return u.createElement(M,{"data-testid":"search-hit","data-search-hit-type":"file","data-search-hit-bucket":i,"data-search-hit-path":a},u.createElement(J,(0,r.pi)({},{handle:d,showBucket:t,downloadable:p})),u.createElement(re,{bucket:i,path:a,version:s,versions:c}),u.createElement(le,{meta:s.meta}),u.createElement(oe,(0,r.pi)({},{handle:d,bucketExistenceData:m,versionExistenceData:h})))}function he(e){var t=e.showBucket,n=e.hit,a=n.path,c=n.versions[0],i=n.bucket,o={bucket:i,key:a};return u.createElement(M,{"data-testid":"search-hit","data-search-hit-type":"dir","data-search-hit-bucket":i,"data-search-hit-path":a},u.createElement(J,(0,r.pi)({},{handle:o,showBucket:t})),u.createElement(le,{meta:c.meta}))}function pe(e){var t=e.showBucket,n=e.hit,a=n.bucket,c=n.handle,i=n.hash,o=n.lastModified,l=n.meta,s=n.tags,d=n.comment;return u.createElement(M,{"data-testid":"search-hit","data-search-hit-type":"package","data-search-hit-bucket":a,"data-search-hit-package-name":c,"data-search-hit-package-hash":i},u.createElement(Q,(0,r.pi)({},{handle:c,bucket:a,hash:i,showBucket:t})),u.createElement(ue,(0,r.pi)({},{bucket:a,handle:c,hash:i,comment:d,lastModified:o})),s&&s.length>0&&u.createElement(h.Z,{mt:2},s.map((function(e){return u.createElement(u.Fragment,{key:e},u.createElement(Z.Z,{variant:"outlined",size:"small",label:e})," ")}))),u.createElement(le,{meta:l}))}function ge(e){var t="package"===e.hit.type?pe:de;return u.createElement(t,(0,r.pi)({},e))}function fe(e){var t=e.hits,n=e.page,a=e.scrollRef,c=e.makePageUrl,i=e.perPage,o=void 0===i?10:i,l=e.showBucket,s=n||1,d=Math.ceil(t.length/o),m=u.useMemo((function(){return 1===d?t:t.slice((s-1)*o,s*o)}),[t,s,o,d]);return(0,j.Z)(s,(function(e){e&&s!==e&&a.current&&a.current.scrollIntoView()})),u.createElement(u.Fragment,null,m.map((function(e){return u.createElement(ge,{key:e.key,hit:e,showBucket:l})})),d>1&&u.createElement(B.Z,(0,r.pi)({},{pages:d,page:s,makePageUrl:c})))}var Ee=k.Z((function(e){var t;return{root:(t={paddingTop:e.spacing(3)},t[e.breakpoints.down("xs")]={borderTop:"1px solid ".concat(e.palette.divider),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},t)}}));function ke(e){var t=e.className,n=(0,r._T)(e,["className"]),a=Ee();return u.createElement(h.Z,(0,r.pi)({className:c()(t,a.root)},n))}function ve(e){var t=e.children;return u.createElement(ke,null,u.createElement(I.Z,{alwaysRender:!0},(function(e){return u.createElement(x.Z,{in:e},u.createElement(h.Z,{display:"flex",alignItems:"center"},u.createElement(h.Z,{pr:2},u.createElement(w.Z,{size:24})),u.createElement(E.Z,{variant:"body1"},t)))})))}var ye=function(e){return function(t){return u.createElement(ke,null,u.createElement(E.Z,{variant:"h5",gutterBottom:!0},"SearchSyntaxError"===t.message?u.createElement(u.Fragment,null,"Search syntax error"):"Timeout"===t.message?u.createElement(u.Fragment,null,"Query timed out"):u.createElement(u.Fragment,null,"Search error")),"SearchSyntaxError"===t.message?u.createElement(E.Z,{gutterBottom:!0},"Oops, couldn't parse that search. Try quoting your query or read about"," ",u.createElement(O.Z,{href:G,target:"_blank"},"supported query syntax"),".",!!e&&u.createElement(u.Fragment,null," You can also click RETRY to try a simplified version of your query.")):"Timeout"===t.message?u.createElement(E.Z,{gutterBottom:!0},"That made ElasticSearch sweat. Try"," ",u.createElement(O.Z,{href:V,target:"_blank"},"avoiding wildcards")," ","or ask Quilt about scaling your cluster."):u.createElement(E.Z,{gutterBottom:!0},"ElasticSearch had trouble with that query. The cluster may be busy indexing new documents. Try again later",!!e&&u.createElement(u.Fragment,null," or click RETRY to try a simplified version of your query"),"."),!!t.status&&u.createElement(E.Z,null,"Status: ",t.status),!!t.code&&u.createElement(E.Z,null,"Code: ",t.code),!!t.details&&u.createElement(u.Fragment,null,u.createElement(E.Z,null,"Error details:"),u.createElement(E.Z,{style:{whiteSpace:"pre"}},t.details)),!!e&&u.createElement(h.Z,{pt:2},u.createElement(b.Z,{component:d.Link,to:e,color:"primary",variant:"contained"},"Retry simplified query")))}};function be(e){var t=e.children;return u.createElement(ke,null,u.createElement(E.Z,{variant:"body1"},"We have not found anything matching your query"),t)}},79995:(e,t,n)=>{n.d(t,{Z:()=>M});var r,a=n(70655),c=n(3735),i=n(40362),o=n(20926),l=n(19344),s=n(57330),u=n(57438),d=n(12338),m=n(63896),h=n(83542),p=n(58493),g=n(67294),f=n(46974),E=n(37894),k=n(36155),v=n(57996),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t}(k.G),b=function(e){return e&&new Date(e)},Z="_packages",x=function(e){var t,n=e.bucket,r=e.score,a=e.src,c="object:".concat(n,"/").concat(a.key);return(t={})[c]={key:c,type:"object",score:r,bucket:n,path:a.key,versions:[{id:a.version_id,score:r,updated:b(a.updated),lastModified:b(a.last_modified),size:a.size,meta:a.user_meta,deleteMarker:a.delete_marker}]},t},w=function(e){try{return JSON.parse(e)}catch(t){return e}},_=function(e){var t,n=e.bucket,r=e.score,a=e.src;if(a.delete_marker||!a.hash)return{};var c="package:".concat(n,"/").concat(a.handle,":").concat(a.hash);return(t={})[c]={key:c,type:"package",bucket:n,score:r,handle:a.handle,hash:a.hash,lastModified:b(a.last_modified),meta:w(a.metadata),comment:a.comment},t},T=function(e){var t=e._score,n=e._source,r=function(e){var t=e.lastIndexOf("-reindex-"),n=-1===t?e:e.slice(0,t),r=n.lastIndexOf(Z);return-1===r?{type:"object",bucket:n}:{type:"package",bucket:n.slice(0,r)}}(e._index),a=r.type,c=r.bucket;return("object"===a?x:_)({bucket:c,score:t,src:n})},B=function(e,t){return t},S=i.Z((r={score:o.Z,versions:l.Z(s.Z,u.Z((function(e){return-e.score})))},function(e,t,n){return(r[e]||B)(t,n)})),D=l.Z(d.Z((function(e,t){return S(e,T(t))}),{}),m.Z,u.Z((function(e){return-e.score})));function M(){var e=this,t=f.D$(),n=E.Zh(),r=g.useMemo((function(){return n.map((function(e){return e.name}))}),[n]);return g.useCallback((function(n){var i=n.query,o=n.buckets,l=void 0===o?[]:o,s=n.mode,u=void 0===s?"all":s,d=n.retry;return(0,a.mG)(e,void 0,void 0,(function(){var e,n,o,s,m,g,E;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:e=c.zG(l.length?l:r,h.Z((function(e){var t=[];return"objects"!==u&&"all"!==u||t.push(e),"packages"!==u&&"all"!==u||t.push("".concat(e).concat(Z)),t})),p.Z(",")),a.label=1;case 1:return a.trys.push([1,3,,4]),n=(0,v.Z)({index:e,action:"search",query:i,retry:d}),[4,t("/search".concat(n))];case 2:return o=a.sent(),[2,{hits:D(o.hits.hits),total:o.hits.total}];case 3:if((s=a.sent())instanceof f.Bb){if(m=s.text.match(/^RequestError\((\d+), '(\w+)', '(.+)'\)$/)){if(g=m[2],k=m[3],E=k.replace(/\\n/g,"\n"),"search_phase_execution_exception"===g)throw new y("SearchSyntaxError",{details:E});throw new y("RequestError",{code:g,details:E,status:parseInt(m[1],10)||void 0})}if(s.text&&/^ConnectionTimeout/.test(s.text))throw new y("Timeout")}throw console.log("Search error:"),console.error(s),new y("Unexpected",{originalError:s});case 4:return[2]}var k}))}))}),[t,r])}}}]);
//# sourceMappingURL=3898.4977f4a722986f1f1932.chunk.js.map