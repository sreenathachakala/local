{"version":3,"file":"7556.f2faae8aa7b275e45ac2.chunk.js","mappings":"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","sources":["webpack://quilt-navigator/./app/utils/MetaTitle.tsx","webpack://quilt-navigator/./app/containers/Bucket/BucketNav.tsx","webpack://quilt-navigator/./app/containers/Bucket/CatchNotFound.tsx","webpack://quilt-navigator/./app/containers/Bucket/Bucket.js"],"sourcesContent":["import * as React from 'react'\nimport { Helmet } from 'react-helmet'\n\nconst BASE = 'Quilt is a versioned data hub for AWS'\n\nconst DIVIDER = ' â€¢ '\n\ninterface MetaTitleProps {\n  children?: string | string[]\n  base?: string\n}\n\nfunction getTitleSegments(base: string, children?: string | string[]) {\n  if (!children) return [base]\n\n  if (Array.isArray(children)) return [...children, base]\n\n  return [children, base]\n}\n\nexport function getTitle(base: string, children?: string | string[]) {\n  return getTitleSegments(base, children).join(DIVIDER)\n}\n\nexport default function MetaTitle({ children, base = BASE }: MetaTitleProps) {\n  return (\n    <Helmet>\n      <title>{getTitle(base, children)}</title>\n    </Helmet>\n  )\n}\n","import * as React from 'react'\nimport { Link } from 'react-router-dom'\nimport * as M from '@material-ui/core'\n\nimport Skeleton from 'components/Skeleton'\nimport * as NamedRoutes from 'utils/NamedRoutes'\nimport * as BucketPreferences from 'utils/BucketPreferences'\n\nconst useStyles = M.makeStyles((t) => ({\n  root: {\n    minHeight: t.spacing(8),\n    minWidth: 120,\n  },\n}))\n\ntype NavTabProps = React.ComponentProps<typeof M.Tab> & React.ComponentProps<typeof Link>\n\nfunction NavTab(props: NavTabProps) {\n  const classes = useStyles()\n\n  return <M.Tab className={classes.root} component={Link} {...props} />\n}\n\ninterface BucketNavProps {\n  bucket: string\n  section: 'es' | 'overview' | 'packages' | 'queries' | 'search' | 'tree' | false // `keyof` sections object\n}\n\nconst useBucketNavSkeletonStyles = M.makeStyles((t) => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  item: {\n    height: t.spacing(3),\n    margin: t.spacing(3, 3, 2),\n    width: t.spacing(10),\n  },\n}))\n\nfunction BucketNavSkeleton() {\n  const classes = useBucketNavSkeletonStyles()\n  return (\n    <div className={classes.root}>\n      <Skeleton className={classes.item} animate />\n      <Skeleton className={classes.item} animate />\n      <Skeleton className={classes.item} animate />\n    </div>\n  )\n}\n\ninterface TabsProps {\n  bucket: string\n  preferences: BucketPreferences.NavPreferences\n  section: string | boolean\n}\n\nfunction Tabs({ bucket, preferences, section = false }: TabsProps) {\n  const { urls } = NamedRoutes.use()\n  const t = M.useTheme()\n  const sm = M.useMediaQuery(t.breakpoints.down('sm'))\n  return (\n    <M.Tabs\n      value={section}\n      centered={!sm}\n      variant={sm ? 'scrollable' : 'standard'}\n      scrollButtons=\"auto\"\n    >\n      <NavTab label=\"Overview\" value=\"overview\" to={urls.bucketOverview(bucket)} />\n      {preferences.files && (\n        <NavTab label=\"Bucket\" value=\"tree\" to={urls.bucketDir(bucket)} />\n      )}\n      {preferences.packages && (\n        <NavTab label=\"Packages\" value=\"packages\" to={urls.bucketPackageList(bucket)} />\n      )}\n      {preferences.queries && (\n        <NavTab label=\"Queries\" value=\"queries\" to={urls.bucketQueries(bucket)} />\n      )}\n      {section === 'search' && (\n        <NavTab label=\"Search\" value=\"search\" to={urls.bucketSearch(bucket)} />\n      )}\n      {preferences.queries && (section === 'queries' || section === 'es') && (\n        <NavTab label=\"ElasticSearch\" value=\"es\" to={urls.bucketESQueries(bucket)} />\n      )}\n    </M.Tabs>\n  )\n}\n\nexport default function BucketNav({ bucket, section = false }: BucketNavProps) {\n  const { preferences } = BucketPreferences.use()\n\n  if (!preferences) return <BucketNavSkeleton />\n\n  return <Tabs bucket={bucket} preferences={preferences.ui.nav} section={section} />\n}\n","import * as React from 'react'\nimport * as redux from 'react-redux'\nimport * as M from '@material-ui/core'\n\nimport Error from 'components/Error'\nimport * as authSelectors from 'containers/Auth/selectors'\nimport { createNotFound } from 'containers/NotFoundPage'\n\nconst CatchNotFound = createNotFound(() => {\n  const username = redux.useSelector(authSelectors.username)\n  const helpText = username\n    ? 'Try to navigate using one of these tabs above'\n    : 'Do you need to log in?'\n  return (\n    <M.Box mt={4}>\n      <Error headline=\"Nothing here\" detail={helpText} />\n    </M.Box>\n  )\n})\n\nexport default CatchNotFound\n","import * as R from 'ramda'\nimport * as React from 'react'\nimport { Route, Switch, matchPath } from 'react-router-dom'\nimport * as M from '@material-ui/core'\n\nimport Layout from 'components/Layout'\nimport Placeholder from 'components/Placeholder'\nimport { ThrowNotFound } from 'containers/NotFoundPage'\nimport { useBucketExistence } from 'utils/BucketCache'\nimport * as NamedRoutes from 'utils/NamedRoutes'\nimport * as BucketPreferences from 'utils/BucketPreferences'\nimport MetaTitle from 'utils/MetaTitle'\nimport * as RT from 'utils/reactTools'\n\nimport BucketNav from './BucketNav'\nimport CatchNotFound from './CatchNotFound'\nimport { displayError } from './errors'\n\nconst SuspensePlaceholder = () => <Placeholder color=\"text.secondary\" />\n\nconst Dir = RT.mkLazy(() => import('./Dir'), SuspensePlaceholder)\nconst File = RT.mkLazy(() => import('./File'), SuspensePlaceholder)\nconst Overview = RT.mkLazy(() => import('./Overview'), SuspensePlaceholder)\nconst PackageList = RT.mkLazy(() => import('./PackageList'), SuspensePlaceholder)\nconst PackageRevisions = RT.mkLazy(\n  () => import('./PackageRevisions'),\n  SuspensePlaceholder,\n)\nconst PackageTree = RT.mkLazy(() => import('./PackageTree'), SuspensePlaceholder)\nconst Queries = RT.mkLazy(() => import('./Queries'), SuspensePlaceholder)\nconst Search = RT.mkLazy(() => import('./Search'), SuspensePlaceholder)\n\nconst match = (cases) => (pathname) => {\n  // eslint-disable-next-line no-restricted-syntax\n  for (const [section, variants] of Object.entries(cases)) {\n    // eslint-disable-next-line no-restricted-syntax\n    for (const opts of variants) {\n      if (matchPath(pathname, opts)) return section\n    }\n  }\n  return false\n}\n\nconst sections = {\n  es: { path: 'bucketESQueries', exact: true },\n  overview: { path: 'bucketOverview', exact: true },\n  packages: { path: 'bucketPackageList' },\n  tree: [\n    { path: 'bucketFile', exact: true, strict: true },\n    { path: 'bucketDir', exact: true },\n  ],\n  queries: { path: 'bucketQueries' },\n  search: { path: 'bucketSearch', exact: true },\n}\n\nconst getBucketSection = (paths) =>\n  match(\n    R.map(\n      (variants) => [].concat(variants).map(R.evolve({ path: (p) => paths[p] })),\n      sections,\n    ),\n  )\n\nconst useStyles = M.makeStyles((t) => ({\n  appBar: {\n    backgroundColor: t.palette.common.white,\n    color: t.palette.getContrastText(t.palette.common.white),\n  },\n}))\n\nfunction BucketLayout({ bucket, section = false, children }) {\n  const classes = useStyles()\n  const bucketExistenceData = useBucketExistence(bucket)\n  return (\n    <Layout\n      pre={\n        <>\n          <M.AppBar position=\"static\" className={classes.appBar}>\n            <BucketNav bucket={bucket} section={section} />\n          </M.AppBar>\n          <M.Container maxWidth=\"lg\">\n            {bucketExistenceData.case({\n              Ok: () => children,\n              Err: displayError(),\n              _: () => <Placeholder color=\"text.secondary\" />,\n            })}\n          </M.Container>\n        </>\n      }\n    />\n  )\n}\n\nexport default function Bucket({\n  location,\n  match: {\n    params: { bucket },\n  },\n}) {\n  const { paths } = NamedRoutes.use()\n  return (\n    <BucketPreferences.Provider bucket={bucket}>\n      <MetaTitle>{bucket}</MetaTitle>\n      <BucketLayout bucket={bucket} section={getBucketSection(paths)(location.pathname)}>\n        <CatchNotFound id={`${location.pathname}${location.search}${location.hash}`}>\n          <Switch>\n            <Route path={paths.bucketFile} component={File} exact strict />\n            <Route path={paths.bucketDir} component={Dir} exact />\n            <Route path={paths.bucketOverview} component={Overview} exact />\n            <Route path={paths.bucketSearch} component={Search} exact />\n            <Route path={paths.bucketPackageList} component={PackageList} exact />\n            <Route path={paths.bucketPackageDetail} component={PackageTree} exact />\n            <Route path={paths.bucketPackageTree} component={PackageTree} exact />\n            <Route\n              path={paths.bucketPackageRevisions}\n              component={PackageRevisions}\n              exact\n            />\n            <Route path={paths.bucketQueries} component={Queries} />\n            <Route component={ThrowNotFound} />\n          </Switch>\n        </CatchNotFound>\n      </BucketLayout>\n    </BucketPreferences.Provider>\n  )\n}\n"],"names":["getTitle","base","children","Array","isArray","getTitleSegments","join","MetaTitle","useStyles","t","root","minHeight","spacing","minWidth","NavTab","props","classes","className","component","Link","useBucketNavSkeletonStyles","display","justifyContent","item","height","margin","width","BucketNavSkeleton","Skeleton","animate","bucket","preferences","section","urls","NamedRoutes","sm","breakpoints","down","value","centered","variant","scrollButtons","label","to","bucketOverview","files","bucketDir","packages","bucketPackageList","queries","bucketQueries","bucketSearch","bucketESQueries","BucketNav","BucketPreferences","ui","nav","helpText","mt","Error","headline","detail","SuspensePlaceholder","Placeholder","color","Dir","File","Overview","PackageList","PackageRevisions","PackageTree","Queries","Search","sections","es","path","exact","overview","tree","strict","search","getBucketSection","paths","cases","variants","concat","map","p","pathname","Object","entries","opts","appBar","backgroundColor","palette","common","white","getContrastText","BucketLayout","bucketExistenceData","Layout","pre","position","maxWidth","case","Ok","Err","_","Bucket","location","id","hash","bucketFile","bucketPackageDetail","bucketPackageTree","bucketPackageRevisions"],"sourceRoot":""}